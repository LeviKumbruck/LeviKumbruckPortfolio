import{R as jn,T as Bn,a as At,b as an,M as ln,P as qe,C as pe,c as cn,V as ee,d as Ue,e as Dt,W as Fn,H as Un,S as un,U as fn,N as Hn,f as Ee,g as Ne,h as Ot,Q as et,O as Qe,i as he,j as Gn,L as zn,k as Ye,F as dn,l as _e,m as Vn,n as Kn,D as qn,I as Yn,o as Xn,p as hn,q as Wn,r as Zn,B as it,s as pn,t as mn,u as Qn,v as $n,w as Jn,x as gn,y as er,z as Tt,A as tr,E as nr,G as rr,J as at,K as or,X as yn,Y as bn,Z as Ke,_ as sr,$ as vn,a0 as ir,a1 as ar,a2 as lr,a3 as cr,a4 as ur,a5 as lt,a6 as nt,a7 as fr,a8 as dr,a9 as hr,aa as pr,ab as _n,ac as Et,ad as kt,ae as jt,af as Bt,ag as Ft,ah as mr,ai as gr,aj as yr,ak as br,al as rt,am as vr,an as Mt,ao as Ut,ap as wn,aq as xn,ar as It,as as An,at as ct,au as Tn,av as _r,aw as ve,ax as $e,ay as q,az as ye,aA as wr,aB as Be,aC as Ht,aD as xr,aE as Ar,aF as Tr,aG as Er}from"./index-kvvKjrL4.js";const En=parseInt(jn.replace(/\D+/g,""));function Gt(y,n){if(n===Bn)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),y;if(n===At||n===an){let t=y.getIndex();if(t===null){const s=[],f=y.getAttribute("position");if(f!==void 0){for(let u=0;u<f.count;u++)s.push(u);y.setIndex(s),t=y.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),y}const e=t.count-2,r=[];if(t)if(n===At)for(let s=1;s<=e;s++)r.push(t.getX(0)),r.push(t.getX(s)),r.push(t.getX(s+1));else for(let s=0;s<e;s++)s%2===0?(r.push(t.getX(s)),r.push(t.getX(s+1)),r.push(t.getX(s+2))):(r.push(t.getX(s+2)),r.push(t.getX(s+1)),r.push(t.getX(s)));r.length/3!==e&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const o=y.clone();return o.setIndex(r),o.clearGroups(),o}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",n),y}var Mr=Object.defineProperty,Rr=(y,n,t)=>n in y?Mr(y,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):y[n]=t,Sr=(y,n,t)=>(Rr(y,n+"",t),t);const zt=(()=>{const y=class extends ln{constructor(t,e={}){super(t),this.isReflector=!0,this.type="Reflector",this.camera=new qe;const r=this,o=e.color!==void 0?new pe(e.color):new pe(8355711),s=e.textureWidth||512,f=e.textureHeight||512,u=e.clipBias||0,p=e.shader||y.ReflectorShader,g=e.multisample!==void 0?e.multisample:4,_=new cn,E=new ee,L=new ee,x=new ee,P=new Ue,b=new ee(0,0,-1),M=new Dt,I=new ee,S=new ee,R=new Dt,O=new Ue,d=this.camera,T=new Fn(s,f,{samples:g,type:Un}),c=new un({uniforms:fn.clone(p.uniforms),fragmentShader:p.fragmentShader,vertexShader:p.vertexShader});c.uniforms.tDiffuse.value=T.texture,c.uniforms.color.value=o,c.uniforms.textureMatrix.value=O,this.material=c,this.onBeforeRender=function(l,i,m){if(L.setFromMatrixPosition(r.matrixWorld),x.setFromMatrixPosition(m.matrixWorld),P.extractRotation(r.matrixWorld),E.set(0,0,1),E.applyMatrix4(P),I.subVectors(L,x),I.dot(E)>0)return;I.reflect(E).negate(),I.add(L),P.extractRotation(m.matrixWorld),b.set(0,0,-1),b.applyMatrix4(P),b.add(x),S.subVectors(L,b),S.reflect(E).negate(),S.add(L),d.position.copy(I),d.up.set(0,1,0),d.up.applyMatrix4(P),d.up.reflect(E),d.lookAt(S),d.far=m.far,d.updateMatrixWorld(),d.projectionMatrix.copy(m.projectionMatrix),O.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),O.multiply(d.projectionMatrix),O.multiply(d.matrixWorldInverse),O.multiply(r.matrixWorld),_.setFromNormalAndCoplanarPoint(E,L),_.applyMatrix4(d.matrixWorldInverse),M.set(_.normal.x,_.normal.y,_.normal.z,_.constant);const A=d.projectionMatrix;R.x=(Math.sign(M.x)+A.elements[8])/A.elements[0],R.y=(Math.sign(M.y)+A.elements[9])/A.elements[5],R.z=-1,R.w=(1+A.elements[10])/A.elements[14],M.multiplyScalar(2/M.dot(R)),A.elements[2]=M.x,A.elements[6]=M.y,A.elements[10]=M.z+1-u,A.elements[14]=M.w,r.visible=!1;const U=l.getRenderTarget(),F=l.xr.enabled,H=l.shadowMap.autoUpdate,D=l.toneMapping;let Y=!1;"outputColorSpace"in l?Y=l.outputColorSpace==="srgb":Y=l.outputEncoding===3001,l.xr.enabled=!1,l.shadowMap.autoUpdate=!1,"outputColorSpace"in l?l.outputColorSpace="srgb-linear":l.outputEncoding=3e3,l.toneMapping=Hn,l.setRenderTarget(T),l.state.buffers.depth.setMask(!0),l.autoClear===!1&&l.clear(),l.render(i,d),l.xr.enabled=F,l.shadowMap.autoUpdate=H,l.toneMapping=D,"outputColorSpace"in l?l.outputColorSpace=Y?"srgb":"srgb-linear":l.outputEncoding=Y?3001:3e3,l.setRenderTarget(U);const Z=m.viewport;Z!==void 0&&l.state.viewport(Z),r.visible=!0},this.getRenderTarget=function(){return T},this.dispose=function(){T.dispose(),r.material.dispose()}}};let n=y;return Sr(n,"ReflectorShader",{uniforms:{color:{value:null},tDiffuse:{value:null},textureMatrix:{value:null}},vertexShader:`
		uniform mat4 textureMatrix;
		varying vec4 vUv;

		#include <common>
		#include <logdepthbuf_pars_vertex>

		void main() {

			vUv = textureMatrix * vec4( position, 1.0 );

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

			#include <logdepthbuf_vertex>

		}`,fragmentShader:`
		uniform vec3 color;
		uniform sampler2D tDiffuse;
		varying vec4 vUv;

		#include <logdepthbuf_pars_fragment>

		float blendOverlay( float base, float blend ) {

			return( base < 0.5 ? ( 2.0 * base * blend ) : ( 1.0 - 2.0 * ( 1.0 - base ) * ( 1.0 - blend ) ) );

		}

		vec3 blendOverlay( vec3 base, vec3 blend ) {

			return vec3( blendOverlay( base.r, blend.r ), blendOverlay( base.g, blend.g ), blendOverlay( base.b, blend.b ) );

		}

		void main() {

			#include <logdepthbuf_fragment>

			vec4 base = texture2DProj( tDiffuse, vUv );
			gl_FragColor = vec4( blendOverlay( base.rgb, color ), 1.0 );

			#include <tonemapping_fragment>
			#include <${En>=154?"colorspace_fragment":"encodings_fragment"}>

		}`}),n})();var Ir=Object.defineProperty,Lr=(y,n,t)=>n in y?Ir(y,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):y[n]=t,Pr=(y,n,t)=>(Lr(y,n+"",t),t);class Nr{constructor(){Pr(this,"_listeners")}addEventListener(n,t){this._listeners===void 0&&(this._listeners={});const e=this._listeners;e[n]===void 0&&(e[n]=[]),e[n].indexOf(t)===-1&&e[n].push(t)}hasEventListener(n,t){if(this._listeners===void 0)return!1;const e=this._listeners;return e[n]!==void 0&&e[n].indexOf(t)!==-1}removeEventListener(n,t){if(this._listeners===void 0)return;const r=this._listeners[n];if(r!==void 0){const o=r.indexOf(t);o!==-1&&r.splice(o,1)}}dispatchEvent(n){if(this._listeners===void 0)return;const e=this._listeners[n.type];if(e!==void 0){n.target=this;const r=e.slice(0);for(let o=0,s=r.length;o<s;o++)r[o].call(this,n);n.target=null}}}var Cr=Object.defineProperty,Dr=(y,n,t)=>n in y?Cr(y,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):y[n]=t,G=(y,n,t)=>(Dr(y,typeof n!="symbol"?n+"":n,t),t);const We=new Gn,Vt=new cn,Or=Math.cos(70*(Math.PI/180)),Kt=(y,n)=>(y%n+n)%n;class kr extends Nr{constructor(n,t){super(),G(this,"object"),G(this,"domElement"),G(this,"enabled",!0),G(this,"target",new ee),G(this,"minDistance",0),G(this,"maxDistance",1/0),G(this,"minZoom",0),G(this,"maxZoom",1/0),G(this,"minPolarAngle",0),G(this,"maxPolarAngle",Math.PI),G(this,"minAzimuthAngle",-1/0),G(this,"maxAzimuthAngle",1/0),G(this,"enableDamping",!1),G(this,"dampingFactor",.05),G(this,"enableZoom",!0),G(this,"zoomSpeed",1),G(this,"enableRotate",!0),G(this,"rotateSpeed",1),G(this,"enablePan",!0),G(this,"panSpeed",1),G(this,"screenSpacePanning",!0),G(this,"keyPanSpeed",7),G(this,"zoomToCursor",!1),G(this,"autoRotate",!1),G(this,"autoRotateSpeed",2),G(this,"reverseOrbit",!1),G(this,"reverseHorizontalOrbit",!1),G(this,"reverseVerticalOrbit",!1),G(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),G(this,"mouseButtons",{LEFT:Ee.ROTATE,MIDDLE:Ee.DOLLY,RIGHT:Ee.PAN}),G(this,"touches",{ONE:Ne.ROTATE,TWO:Ne.DOLLY_PAN}),G(this,"target0"),G(this,"position0"),G(this,"zoom0"),G(this,"_domElementKeyEvents",null),G(this,"getPolarAngle"),G(this,"getAzimuthalAngle"),G(this,"setPolarAngle"),G(this,"setAzimuthalAngle"),G(this,"getDistance"),G(this,"getZoomScale"),G(this,"listenToKeyEvents"),G(this,"stopListenToKeyEvents"),G(this,"saveState"),G(this,"reset"),G(this,"update"),G(this,"connect"),G(this,"dispose"),G(this,"dollyIn"),G(this,"dollyOut"),G(this,"getScale"),G(this,"setScale"),this.object=n,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>g.phi,this.getAzimuthalAngle=()=>g.theta,this.setPolarAngle=w=>{let k=Kt(w,2*Math.PI),z=g.phi;z<0&&(z+=2*Math.PI),k<0&&(k+=2*Math.PI);let J=Math.abs(k-z);2*Math.PI-J<J&&(k<z?k+=2*Math.PI:z+=2*Math.PI),_.phi=k-z,e.update()},this.setAzimuthalAngle=w=>{let k=Kt(w,2*Math.PI),z=g.theta;z<0&&(z+=2*Math.PI),k<0&&(k+=2*Math.PI);let J=Math.abs(k-z);2*Math.PI-J<J&&(k<z?k+=2*Math.PI:z+=2*Math.PI),_.theta=k-z,e.update()},this.getDistance=()=>e.object.position.distanceTo(e.target),this.listenToKeyEvents=w=>{w.addEventListener("keydown",ot),this._domElementKeyEvents=w},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",ot),this._domElementKeyEvents=null},this.saveState=()=>{e.target0.copy(e.target),e.position0.copy(e.object.position),e.zoom0=e.object.zoom},this.reset=()=>{e.target.copy(e.target0),e.object.position.copy(e.position0),e.object.zoom=e.zoom0,e.object.updateProjectionMatrix(),e.dispatchEvent(r),e.update(),u=f.NONE},this.update=(()=>{const w=new ee,k=new ee(0,1,0),z=new et().setFromUnitVectors(n.up,k),J=z.clone().invert(),le=new ee,we=new et,Le=2*Math.PI;return function(){const Ct=e.object.position;z.setFromUnitVectors(n.up,k),J.copy(z).invert(),w.copy(Ct).sub(e.target),w.applyQuaternion(z),g.setFromVector3(w),e.autoRotate&&u===f.NONE&&F(A()),e.enableDamping?(g.theta+=_.theta*e.dampingFactor,g.phi+=_.phi*e.dampingFactor):(g.theta+=_.theta,g.phi+=_.phi);let xe=e.minAzimuthAngle,Ae=e.maxAzimuthAngle;isFinite(xe)&&isFinite(Ae)&&(xe<-Math.PI?xe+=Le:xe>Math.PI&&(xe-=Le),Ae<-Math.PI?Ae+=Le:Ae>Math.PI&&(Ae-=Le),xe<=Ae?g.theta=Math.max(xe,Math.min(Ae,g.theta)):g.theta=g.theta>(xe+Ae)/2?Math.max(xe,g.theta):Math.min(Ae,g.theta)),g.phi=Math.max(e.minPolarAngle,Math.min(e.maxPolarAngle,g.phi)),g.makeSafe(),e.enableDamping===!0?e.target.addScaledVector(L,e.dampingFactor):e.target.add(L),e.zoomToCursor&&l||e.object.isOrthographicCamera?g.radius=ge(g.radius):g.radius=ge(g.radius*E),w.setFromSpherical(g),w.applyQuaternion(J),Ct.copy(e.target).add(w),e.object.matrixAutoUpdate||e.object.updateMatrix(),e.object.lookAt(e.target),e.enableDamping===!0?(_.theta*=1-e.dampingFactor,_.phi*=1-e.dampingFactor,L.multiplyScalar(1-e.dampingFactor)):(_.set(0,0,0),L.set(0,0,0));let He=!1;if(e.zoomToCursor&&l){let Ge=null;if(e.object instanceof qe&&e.object.isPerspectiveCamera){const ze=w.length();Ge=ge(ze*E);const Xe=ze-Ge;e.object.position.addScaledVector(T,Xe),e.object.updateMatrixWorld()}else if(e.object.isOrthographicCamera){const ze=new ee(c.x,c.y,0);ze.unproject(e.object),e.object.zoom=Math.max(e.minZoom,Math.min(e.maxZoom,e.object.zoom/E)),e.object.updateProjectionMatrix(),He=!0;const Xe=new ee(c.x,c.y,0);Xe.unproject(e.object),e.object.position.sub(Xe).add(ze),e.object.updateMatrixWorld(),Ge=w.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),e.zoomToCursor=!1;Ge!==null&&(e.screenSpacePanning?e.target.set(0,0,-1).transformDirection(e.object.matrix).multiplyScalar(Ge).add(e.object.position):(We.origin.copy(e.object.position),We.direction.set(0,0,-1).transformDirection(e.object.matrix),Math.abs(e.object.up.dot(We.direction))<Or?n.lookAt(e.target):(Vt.setFromNormalAndCoplanarPoint(e.object.up,e.target),We.intersectPlane(Vt,e.target))))}else e.object instanceof Qe&&e.object.isOrthographicCamera&&(He=E!==1,He&&(e.object.zoom=Math.max(e.minZoom,Math.min(e.maxZoom,e.object.zoom/E)),e.object.updateProjectionMatrix()));return E=1,l=!1,He||le.distanceToSquared(e.object.position)>p||8*(1-we.dot(e.object.quaternion))>p?(e.dispatchEvent(r),le.copy(e.object.position),we.copy(e.object.quaternion),He=!1,!0):!1}})(),this.connect=w=>{e.domElement=w,e.domElement.style.touchAction="none",e.domElement.addEventListener("contextmenu",Pt),e.domElement.addEventListener("pointerdown",ie),e.domElement.addEventListener("pointercancel",Ie),e.domElement.addEventListener("wheel",Lt)},this.dispose=()=>{var w,k,z,J,le,we;e.domElement&&(e.domElement.style.touchAction="auto"),(w=e.domElement)==null||w.removeEventListener("contextmenu",Pt),(k=e.domElement)==null||k.removeEventListener("pointerdown",ie),(z=e.domElement)==null||z.removeEventListener("pointercancel",Ie),(J=e.domElement)==null||J.removeEventListener("wheel",Lt),(le=e.domElement)==null||le.ownerDocument.removeEventListener("pointermove",be),(we=e.domElement)==null||we.ownerDocument.removeEventListener("pointerup",Ie),e._domElementKeyEvents!==null&&e._domElementKeyEvents.removeEventListener("keydown",ot)};const e=this,r={type:"change"},o={type:"start"},s={type:"end"},f={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let u=f.NONE;const p=1e-6,g=new Ot,_=new Ot;let E=1;const L=new ee,x=new he,P=new he,b=new he,M=new he,I=new he,S=new he,R=new he,O=new he,d=new he,T=new ee,c=new he;let l=!1;const i=[],m={};function A(){return 2*Math.PI/60/60*e.autoRotateSpeed}function U(){return Math.pow(.95,e.zoomSpeed)}function F(w){e.reverseOrbit||e.reverseHorizontalOrbit?_.theta+=w:_.theta-=w}function H(w){e.reverseOrbit||e.reverseVerticalOrbit?_.phi+=w:_.phi-=w}const D=(()=>{const w=new ee;return function(z,J){w.setFromMatrixColumn(J,0),w.multiplyScalar(-z),L.add(w)}})(),Y=(()=>{const w=new ee;return function(z,J){e.screenSpacePanning===!0?w.setFromMatrixColumn(J,1):(w.setFromMatrixColumn(J,0),w.crossVectors(e.object.up,w)),w.multiplyScalar(z),L.add(w)}})(),Z=(()=>{const w=new ee;return function(z,J){const le=e.domElement;if(le&&e.object instanceof qe&&e.object.isPerspectiveCamera){const we=e.object.position;w.copy(we).sub(e.target);let Le=w.length();Le*=Math.tan(e.object.fov/2*Math.PI/180),D(2*z*Le/le.clientHeight,e.object.matrix),Y(2*J*Le/le.clientHeight,e.object.matrix)}else le&&e.object instanceof Qe&&e.object.isOrthographicCamera?(D(z*(e.object.right-e.object.left)/e.object.zoom/le.clientWidth,e.object.matrix),Y(J*(e.object.top-e.object.bottom)/e.object.zoom/le.clientHeight,e.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),e.enablePan=!1)}})();function $(w){e.object instanceof qe&&e.object.isPerspectiveCamera||e.object instanceof Qe&&e.object.isOrthographicCamera?E=w:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),e.enableZoom=!1)}function Q(w){$(E/w)}function ce(w){$(E*w)}function Re(w){if(!e.zoomToCursor||!e.domElement)return;l=!0;const k=e.domElement.getBoundingClientRect(),z=w.clientX-k.left,J=w.clientY-k.top,le=k.width,we=k.height;c.x=z/le*2-1,c.y=-(J/we)*2+1,T.set(c.x,c.y,1).unproject(e.object).sub(e.object.position).normalize()}function ge(w){return Math.max(e.minDistance,Math.min(e.maxDistance,w))}function ue(w){x.set(w.clientX,w.clientY)}function Ce(w){Re(w),R.set(w.clientX,w.clientY)}function Se(w){M.set(w.clientX,w.clientY)}function ke(w){P.set(w.clientX,w.clientY),b.subVectors(P,x).multiplyScalar(e.rotateSpeed);const k=e.domElement;k&&(F(2*Math.PI*b.x/k.clientHeight),H(2*Math.PI*b.y/k.clientHeight)),x.copy(P),e.update()}function j(w){O.set(w.clientX,w.clientY),d.subVectors(O,R),d.y>0?Q(U()):d.y<0&&ce(U()),R.copy(O),e.update()}function a(w){I.set(w.clientX,w.clientY),S.subVectors(I,M).multiplyScalar(e.panSpeed),Z(S.x,S.y),M.copy(I),e.update()}function h(w){Re(w),w.deltaY<0?ce(U()):w.deltaY>0&&Q(U()),e.update()}function v(w){let k=!1;switch(w.code){case e.keys.UP:Z(0,e.keyPanSpeed),k=!0;break;case e.keys.BOTTOM:Z(0,-e.keyPanSpeed),k=!0;break;case e.keys.LEFT:Z(e.keyPanSpeed,0),k=!0;break;case e.keys.RIGHT:Z(-e.keyPanSpeed,0),k=!0;break}k&&(w.preventDefault(),e.update())}function C(){if(i.length==1)x.set(i[0].pageX,i[0].pageY);else{const w=.5*(i[0].pageX+i[1].pageX),k=.5*(i[0].pageY+i[1].pageY);x.set(w,k)}}function N(){if(i.length==1)M.set(i[0].pageX,i[0].pageY);else{const w=.5*(i[0].pageX+i[1].pageX),k=.5*(i[0].pageY+i[1].pageY);M.set(w,k)}}function B(){const w=i[0].pageX-i[1].pageX,k=i[0].pageY-i[1].pageY,z=Math.sqrt(w*w+k*k);R.set(0,z)}function K(){e.enableZoom&&B(),e.enablePan&&N()}function ne(){e.enableZoom&&B(),e.enableRotate&&C()}function se(w){if(i.length==1)P.set(w.pageX,w.pageY);else{const z=st(w),J=.5*(w.pageX+z.x),le=.5*(w.pageY+z.y);P.set(J,le)}b.subVectors(P,x).multiplyScalar(e.rotateSpeed);const k=e.domElement;k&&(F(2*Math.PI*b.x/k.clientHeight),H(2*Math.PI*b.y/k.clientHeight)),x.copy(P)}function W(w){if(i.length==1)I.set(w.pageX,w.pageY);else{const k=st(w),z=.5*(w.pageX+k.x),J=.5*(w.pageY+k.y);I.set(z,J)}S.subVectors(I,M).multiplyScalar(e.panSpeed),Z(S.x,S.y),M.copy(I)}function oe(w){const k=st(w),z=w.pageX-k.x,J=w.pageY-k.y,le=Math.sqrt(z*z+J*J);O.set(0,le),d.set(0,Math.pow(O.y/R.y,e.zoomSpeed)),Q(d.y),R.copy(O)}function ae(w){e.enableZoom&&oe(w),e.enablePan&&W(w)}function re(w){e.enableZoom&&oe(w),e.enableRotate&&se(w)}function ie(w){var k,z;e.enabled!==!1&&(i.length===0&&((k=e.domElement)==null||k.ownerDocument.addEventListener("pointermove",be),(z=e.domElement)==null||z.ownerDocument.addEventListener("pointerup",Ie)),On(w),w.pointerType==="touch"?Cn(w):Pn(w))}function be(w){e.enabled!==!1&&(w.pointerType==="touch"?Dn(w):Nn(w))}function Ie(w){var k,z,J;kn(w),i.length===0&&((k=e.domElement)==null||k.releasePointerCapture(w.pointerId),(z=e.domElement)==null||z.ownerDocument.removeEventListener("pointermove",be),(J=e.domElement)==null||J.ownerDocument.removeEventListener("pointerup",Ie)),e.dispatchEvent(s),u=f.NONE}function Pn(w){let k;switch(w.button){case 0:k=e.mouseButtons.LEFT;break;case 1:k=e.mouseButtons.MIDDLE;break;case 2:k=e.mouseButtons.RIGHT;break;default:k=-1}switch(k){case Ee.DOLLY:if(e.enableZoom===!1)return;Ce(w),u=f.DOLLY;break;case Ee.ROTATE:if(w.ctrlKey||w.metaKey||w.shiftKey){if(e.enablePan===!1)return;Se(w),u=f.PAN}else{if(e.enableRotate===!1)return;ue(w),u=f.ROTATE}break;case Ee.PAN:if(w.ctrlKey||w.metaKey||w.shiftKey){if(e.enableRotate===!1)return;ue(w),u=f.ROTATE}else{if(e.enablePan===!1)return;Se(w),u=f.PAN}break;default:u=f.NONE}u!==f.NONE&&e.dispatchEvent(o)}function Nn(w){if(e.enabled!==!1)switch(u){case f.ROTATE:if(e.enableRotate===!1)return;ke(w);break;case f.DOLLY:if(e.enableZoom===!1)return;j(w);break;case f.PAN:if(e.enablePan===!1)return;a(w);break}}function Lt(w){e.enabled===!1||e.enableZoom===!1||u!==f.NONE&&u!==f.ROTATE||(w.preventDefault(),e.dispatchEvent(o),h(w),e.dispatchEvent(s))}function ot(w){e.enabled===!1||e.enablePan===!1||v(w)}function Cn(w){switch(Nt(w),i.length){case 1:switch(e.touches.ONE){case Ne.ROTATE:if(e.enableRotate===!1)return;C(),u=f.TOUCH_ROTATE;break;case Ne.PAN:if(e.enablePan===!1)return;N(),u=f.TOUCH_PAN;break;default:u=f.NONE}break;case 2:switch(e.touches.TWO){case Ne.DOLLY_PAN:if(e.enableZoom===!1&&e.enablePan===!1)return;K(),u=f.TOUCH_DOLLY_PAN;break;case Ne.DOLLY_ROTATE:if(e.enableZoom===!1&&e.enableRotate===!1)return;ne(),u=f.TOUCH_DOLLY_ROTATE;break;default:u=f.NONE}break;default:u=f.NONE}u!==f.NONE&&e.dispatchEvent(o)}function Dn(w){switch(Nt(w),u){case f.TOUCH_ROTATE:if(e.enableRotate===!1)return;se(w),e.update();break;case f.TOUCH_PAN:if(e.enablePan===!1)return;W(w),e.update();break;case f.TOUCH_DOLLY_PAN:if(e.enableZoom===!1&&e.enablePan===!1)return;ae(w),e.update();break;case f.TOUCH_DOLLY_ROTATE:if(e.enableZoom===!1&&e.enableRotate===!1)return;re(w),e.update();break;default:u=f.NONE}}function Pt(w){e.enabled!==!1&&w.preventDefault()}function On(w){i.push(w)}function kn(w){delete m[w.pointerId];for(let k=0;k<i.length;k++)if(i[k].pointerId==w.pointerId){i.splice(k,1);return}}function Nt(w){let k=m[w.pointerId];k===void 0&&(k=new he,m[w.pointerId]=k),k.set(w.pageX,w.pageY)}function st(w){const k=w.pointerId===i[0].pointerId?i[1]:i[0];return m[k.pointerId]}this.dollyIn=(w=U())=>{ce(w),e.update()},this.dollyOut=(w=U())=>{Q(w),e.update()},this.getScale=()=>E,this.setScale=w=>{$(w),e.update()},this.getZoomScale=()=>U(),t!==void 0&&this.connect(t),this.update()}}function tt(y){if(typeof TextDecoder<"u")return new TextDecoder().decode(y);let n="";for(let t=0,e=y.length;t<e;t++)n+=String.fromCharCode(y[t]);try{return decodeURIComponent(escape(n))}catch{return n}}const Oe="srgb",Me="srgb-linear",qt=3001,jr=3e3;class Br extends zn{constructor(n){super(n),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new zr(t)}),this.register(function(t){return new Vr(t)}),this.register(function(t){return new Jr(t)}),this.register(function(t){return new eo(t)}),this.register(function(t){return new to(t)}),this.register(function(t){return new qr(t)}),this.register(function(t){return new Yr(t)}),this.register(function(t){return new Xr(t)}),this.register(function(t){return new Wr(t)}),this.register(function(t){return new Gr(t)}),this.register(function(t){return new Zr(t)}),this.register(function(t){return new Kr(t)}),this.register(function(t){return new $r(t)}),this.register(function(t){return new Qr(t)}),this.register(function(t){return new Ur(t)}),this.register(function(t){return new no(t)}),this.register(function(t){return new ro(t)})}load(n,t,e,r){const o=this;let s;if(this.resourcePath!=="")s=this.resourcePath;else if(this.path!==""){const p=Ye.extractUrlBase(n);s=Ye.resolveURL(p,this.path)}else s=Ye.extractUrlBase(n);this.manager.itemStart(n);const f=function(p){r?r(p):console.error(p),o.manager.itemError(n),o.manager.itemEnd(n)},u=new dn(this.manager);u.setPath(this.path),u.setResponseType("arraybuffer"),u.setRequestHeader(this.requestHeader),u.setWithCredentials(this.withCredentials),u.load(n,function(p){try{o.parse(p,s,function(g){t(g),o.manager.itemEnd(n)},f)}catch(g){f(g)}},e,f)}setDRACOLoader(n){return this.dracoLoader=n,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(n){return this.ktx2Loader=n,this}setMeshoptDecoder(n){return this.meshoptDecoder=n,this}register(n){return this.pluginCallbacks.indexOf(n)===-1&&this.pluginCallbacks.push(n),this}unregister(n){return this.pluginCallbacks.indexOf(n)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(n),1),this}parse(n,t,e,r){let o;const s={},f={};if(typeof n=="string")o=JSON.parse(n);else if(n instanceof ArrayBuffer)if(tt(new Uint8Array(n.slice(0,4)))===Mn){try{s[X.KHR_BINARY_GLTF]=new oo(n)}catch(g){r&&r(g);return}o=JSON.parse(s[X.KHR_BINARY_GLTF].content)}else o=JSON.parse(tt(new Uint8Array(n)));else o=n;if(o.asset===void 0||o.asset.version[0]<2){r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const u=new bo(o,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});u.fileLoader.setRequestHeader(this.requestHeader);for(let p=0;p<this.pluginCallbacks.length;p++){const g=this.pluginCallbacks[p](u);g.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),f[g.name]=g,s[g.name]=!0}if(o.extensionsUsed)for(let p=0;p<o.extensionsUsed.length;++p){const g=o.extensionsUsed[p],_=o.extensionsRequired||[];switch(g){case X.KHR_MATERIALS_UNLIT:s[g]=new Hr;break;case X.KHR_DRACO_MESH_COMPRESSION:s[g]=new so(o,this.dracoLoader);break;case X.KHR_TEXTURE_TRANSFORM:s[g]=new io;break;case X.KHR_MESH_QUANTIZATION:s[g]=new ao;break;default:_.indexOf(g)>=0&&f[g]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+g+'".')}}u.setExtensions(s),u.setPlugins(f),u.parse(e,r)}parseAsync(n,t){const e=this;return new Promise(function(r,o){e.parse(n,t,r,o)})}}function Fr(){let y={};return{get:function(n){return y[n]},add:function(n,t){y[n]=t},remove:function(n){delete y[n]},removeAll:function(){y={}}}}const X={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class Ur{constructor(n){this.parser=n,this.name=X.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const n=this.parser,t=this.parser.json.nodes||[];for(let e=0,r=t.length;e<r;e++){const o=t[e];o.extensions&&o.extensions[this.name]&&o.extensions[this.name].light!==void 0&&n._addNodeRef(this.cache,o.extensions[this.name].light)}}_loadLight(n){const t=this.parser,e="light:"+n;let r=t.cache.get(e);if(r)return r;const o=t.json,u=((o.extensions&&o.extensions[this.name]||{}).lights||[])[n];let p;const g=new pe(16777215);u.color!==void 0&&g.setRGB(u.color[0],u.color[1],u.color[2],Me);const _=u.range!==void 0?u.range:0;switch(u.type){case"directional":p=new qn(g),p.target.position.set(0,0,-1),p.add(p.target);break;case"point":p=new Kn(g),p.distance=_;break;case"spot":p=new Vn(g),p.distance=_,u.spot=u.spot||{},u.spot.innerConeAngle=u.spot.innerConeAngle!==void 0?u.spot.innerConeAngle:0,u.spot.outerConeAngle=u.spot.outerConeAngle!==void 0?u.spot.outerConeAngle:Math.PI/4,p.angle=u.spot.outerConeAngle,p.penumbra=1-u.spot.innerConeAngle/u.spot.outerConeAngle,p.target.position.set(0,0,-1),p.add(p.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+u.type)}return p.position.set(0,0,0),p.decay=2,Te(p,u),u.intensity!==void 0&&(p.intensity=u.intensity),p.name=t.createUniqueName(u.name||"light_"+n),r=Promise.resolve(p),t.cache.add(e,r),r}getDependency(n,t){if(n==="light")return this._loadLight(t)}createNodeAttachment(n){const t=this,e=this.parser,o=e.json.nodes[n],f=(o.extensions&&o.extensions[this.name]||{}).light;return f===void 0?null:this._loadLight(f).then(function(u){return e._getNodeRef(t.cache,f,u)})}}class Hr{constructor(){this.name=X.KHR_MATERIALS_UNLIT}getMaterialType(){return Ke}extendParams(n,t,e){const r=[];n.color=new pe(1,1,1),n.opacity=1;const o=t.pbrMetallicRoughness;if(o){if(Array.isArray(o.baseColorFactor)){const s=o.baseColorFactor;n.color.setRGB(s[0],s[1],s[2],Me),n.opacity=s[3]}o.baseColorTexture!==void 0&&r.push(e.assignTexture(n,"map",o.baseColorTexture,Oe))}return Promise.all(r)}}class Gr{constructor(n){this.parser=n,this.name=X.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(n,t){const r=this.parser.json.materials[n];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const o=r.extensions[this.name].emissiveStrength;return o!==void 0&&(t.emissiveIntensity=o),Promise.resolve()}}class zr{constructor(n){this.parser=n,this.name=X.KHR_MATERIALS_CLEARCOAT}getMaterialType(n){const e=this.parser.json.materials[n];return!e.extensions||!e.extensions[this.name]?null:_e}extendMaterialParams(n,t){const e=this.parser,r=e.json.materials[n];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const o=[],s=r.extensions[this.name];if(s.clearcoatFactor!==void 0&&(t.clearcoat=s.clearcoatFactor),s.clearcoatTexture!==void 0&&o.push(e.assignTexture(t,"clearcoatMap",s.clearcoatTexture)),s.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=s.clearcoatRoughnessFactor),s.clearcoatRoughnessTexture!==void 0&&o.push(e.assignTexture(t,"clearcoatRoughnessMap",s.clearcoatRoughnessTexture)),s.clearcoatNormalTexture!==void 0&&(o.push(e.assignTexture(t,"clearcoatNormalMap",s.clearcoatNormalTexture)),s.clearcoatNormalTexture.scale!==void 0)){const f=s.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new he(f,f)}return Promise.all(o)}}class Vr{constructor(n){this.parser=n,this.name=X.KHR_MATERIALS_DISPERSION}getMaterialType(n){const e=this.parser.json.materials[n];return!e.extensions||!e.extensions[this.name]?null:_e}extendMaterialParams(n,t){const r=this.parser.json.materials[n];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const o=r.extensions[this.name];return t.dispersion=o.dispersion!==void 0?o.dispersion:0,Promise.resolve()}}class Kr{constructor(n){this.parser=n,this.name=X.KHR_MATERIALS_IRIDESCENCE}getMaterialType(n){const e=this.parser.json.materials[n];return!e.extensions||!e.extensions[this.name]?null:_e}extendMaterialParams(n,t){const e=this.parser,r=e.json.materials[n];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const o=[],s=r.extensions[this.name];return s.iridescenceFactor!==void 0&&(t.iridescence=s.iridescenceFactor),s.iridescenceTexture!==void 0&&o.push(e.assignTexture(t,"iridescenceMap",s.iridescenceTexture)),s.iridescenceIor!==void 0&&(t.iridescenceIOR=s.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),s.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=s.iridescenceThicknessMinimum),s.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=s.iridescenceThicknessMaximum),s.iridescenceThicknessTexture!==void 0&&o.push(e.assignTexture(t,"iridescenceThicknessMap",s.iridescenceThicknessTexture)),Promise.all(o)}}class qr{constructor(n){this.parser=n,this.name=X.KHR_MATERIALS_SHEEN}getMaterialType(n){const e=this.parser.json.materials[n];return!e.extensions||!e.extensions[this.name]?null:_e}extendMaterialParams(n,t){const e=this.parser,r=e.json.materials[n];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const o=[];t.sheenColor=new pe(0,0,0),t.sheenRoughness=0,t.sheen=1;const s=r.extensions[this.name];if(s.sheenColorFactor!==void 0){const f=s.sheenColorFactor;t.sheenColor.setRGB(f[0],f[1],f[2],Me)}return s.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=s.sheenRoughnessFactor),s.sheenColorTexture!==void 0&&o.push(e.assignTexture(t,"sheenColorMap",s.sheenColorTexture,Oe)),s.sheenRoughnessTexture!==void 0&&o.push(e.assignTexture(t,"sheenRoughnessMap",s.sheenRoughnessTexture)),Promise.all(o)}}class Yr{constructor(n){this.parser=n,this.name=X.KHR_MATERIALS_TRANSMISSION}getMaterialType(n){const e=this.parser.json.materials[n];return!e.extensions||!e.extensions[this.name]?null:_e}extendMaterialParams(n,t){const e=this.parser,r=e.json.materials[n];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const o=[],s=r.extensions[this.name];return s.transmissionFactor!==void 0&&(t.transmission=s.transmissionFactor),s.transmissionTexture!==void 0&&o.push(e.assignTexture(t,"transmissionMap",s.transmissionTexture)),Promise.all(o)}}class Xr{constructor(n){this.parser=n,this.name=X.KHR_MATERIALS_VOLUME}getMaterialType(n){const e=this.parser.json.materials[n];return!e.extensions||!e.extensions[this.name]?null:_e}extendMaterialParams(n,t){const e=this.parser,r=e.json.materials[n];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const o=[],s=r.extensions[this.name];t.thickness=s.thicknessFactor!==void 0?s.thicknessFactor:0,s.thicknessTexture!==void 0&&o.push(e.assignTexture(t,"thicknessMap",s.thicknessTexture)),t.attenuationDistance=s.attenuationDistance||1/0;const f=s.attenuationColor||[1,1,1];return t.attenuationColor=new pe().setRGB(f[0],f[1],f[2],Me),Promise.all(o)}}class Wr{constructor(n){this.parser=n,this.name=X.KHR_MATERIALS_IOR}getMaterialType(n){const e=this.parser.json.materials[n];return!e.extensions||!e.extensions[this.name]?null:_e}extendMaterialParams(n,t){const r=this.parser.json.materials[n];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const o=r.extensions[this.name];return t.ior=o.ior!==void 0?o.ior:1.5,Promise.resolve()}}class Zr{constructor(n){this.parser=n,this.name=X.KHR_MATERIALS_SPECULAR}getMaterialType(n){const e=this.parser.json.materials[n];return!e.extensions||!e.extensions[this.name]?null:_e}extendMaterialParams(n,t){const e=this.parser,r=e.json.materials[n];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const o=[],s=r.extensions[this.name];t.specularIntensity=s.specularFactor!==void 0?s.specularFactor:1,s.specularTexture!==void 0&&o.push(e.assignTexture(t,"specularIntensityMap",s.specularTexture));const f=s.specularColorFactor||[1,1,1];return t.specularColor=new pe().setRGB(f[0],f[1],f[2],Me),s.specularColorTexture!==void 0&&o.push(e.assignTexture(t,"specularColorMap",s.specularColorTexture,Oe)),Promise.all(o)}}class Qr{constructor(n){this.parser=n,this.name=X.EXT_MATERIALS_BUMP}getMaterialType(n){const e=this.parser.json.materials[n];return!e.extensions||!e.extensions[this.name]?null:_e}extendMaterialParams(n,t){const e=this.parser,r=e.json.materials[n];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const o=[],s=r.extensions[this.name];return t.bumpScale=s.bumpFactor!==void 0?s.bumpFactor:1,s.bumpTexture!==void 0&&o.push(e.assignTexture(t,"bumpMap",s.bumpTexture)),Promise.all(o)}}class $r{constructor(n){this.parser=n,this.name=X.KHR_MATERIALS_ANISOTROPY}getMaterialType(n){const e=this.parser.json.materials[n];return!e.extensions||!e.extensions[this.name]?null:_e}extendMaterialParams(n,t){const e=this.parser,r=e.json.materials[n];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const o=[],s=r.extensions[this.name];return s.anisotropyStrength!==void 0&&(t.anisotropy=s.anisotropyStrength),s.anisotropyRotation!==void 0&&(t.anisotropyRotation=s.anisotropyRotation),s.anisotropyTexture!==void 0&&o.push(e.assignTexture(t,"anisotropyMap",s.anisotropyTexture)),Promise.all(o)}}class Jr{constructor(n){this.parser=n,this.name=X.KHR_TEXTURE_BASISU}loadTexture(n){const t=this.parser,e=t.json,r=e.textures[n];if(!r.extensions||!r.extensions[this.name])return null;const o=r.extensions[this.name],s=t.options.ktx2Loader;if(!s){if(e.extensionsRequired&&e.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(n,o.source,s)}}class eo{constructor(n){this.parser=n,this.name=X.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(n){const t=this.name,e=this.parser,r=e.json,o=r.textures[n];if(!o.extensions||!o.extensions[t])return null;const s=o.extensions[t],f=r.images[s.source];let u=e.textureLoader;if(f.uri){const p=e.options.manager.getHandler(f.uri);p!==null&&(u=p)}return this.detectSupport().then(function(p){if(p)return e.loadTextureImage(n,s.source,u);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return e.loadTexture(n)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(n){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){n(t.height===1)}})),this.isSupported}}class to{constructor(n){this.parser=n,this.name=X.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(n){const t=this.name,e=this.parser,r=e.json,o=r.textures[n];if(!o.extensions||!o.extensions[t])return null;const s=o.extensions[t],f=r.images[s.source];let u=e.textureLoader;if(f.uri){const p=e.options.manager.getHandler(f.uri);p!==null&&(u=p)}return this.detectSupport().then(function(p){if(p)return e.loadTextureImage(n,s.source,u);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return e.loadTexture(n)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(n){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){n(t.height===1)}})),this.isSupported}}class no{constructor(n){this.name=X.EXT_MESHOPT_COMPRESSION,this.parser=n}loadBufferView(n){const t=this.parser.json,e=t.bufferViews[n];if(e.extensions&&e.extensions[this.name]){const r=e.extensions[this.name],o=this.parser.getDependency("buffer",r.buffer),s=this.parser.options.meshoptDecoder;if(!s||!s.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return o.then(function(f){const u=r.byteOffset||0,p=r.byteLength||0,g=r.count,_=r.byteStride,E=new Uint8Array(f,u,p);return s.decodeGltfBufferAsync?s.decodeGltfBufferAsync(g,_,E,r.mode,r.filter).then(function(L){return L.buffer}):s.ready.then(function(){const L=new ArrayBuffer(g*_);return s.decodeGltfBuffer(new Uint8Array(L),g,_,E,r.mode,r.filter),L})})}else return null}}class ro{constructor(n){this.name=X.EXT_MESH_GPU_INSTANCING,this.parser=n}createNodeMesh(n){const t=this.parser.json,e=t.nodes[n];if(!e.extensions||!e.extensions[this.name]||e.mesh===void 0)return null;const r=t.meshes[e.mesh];for(const p of r.primitives)if(p.mode!==me.TRIANGLES&&p.mode!==me.TRIANGLE_STRIP&&p.mode!==me.TRIANGLE_FAN&&p.mode!==void 0)return null;const s=e.extensions[this.name].attributes,f=[],u={};for(const p in s)f.push(this.parser.getDependency("accessor",s[p]).then(g=>(u[p]=g,u[p])));return f.length<1?null:(f.push(this.parser.createNodeMesh(n)),Promise.all(f).then(p=>{const g=p.pop(),_=g.isGroup?g.children:[g],E=p[0].count,L=[];for(const x of _){const P=new Ue,b=new ee,M=new et,I=new ee(1,1,1),S=new Yn(x.geometry,x.material,E);for(let R=0;R<E;R++)u.TRANSLATION&&b.fromBufferAttribute(u.TRANSLATION,R),u.ROTATION&&M.fromBufferAttribute(u.ROTATION,R),u.SCALE&&I.fromBufferAttribute(u.SCALE,R),S.setMatrixAt(R,P.compose(b,M,I));for(const R in u)if(R==="_COLOR_0"){const O=u[R];S.instanceColor=new Xn(O.array,O.itemSize,O.normalized)}else R!=="TRANSLATION"&&R!=="ROTATION"&&R!=="SCALE"&&x.geometry.setAttribute(R,u[R]);hn.prototype.copy.call(S,x),this.parser.assignFinalMaterial(S),L.push(S)}return g.isGroup?(g.clear(),g.add(...L),g):L[0]}))}}const Mn="glTF",Ve=12,Yt={JSON:1313821514,BIN:5130562};class oo{constructor(n){this.name=X.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(n,0,Ve);if(this.header={magic:tt(new Uint8Array(n.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==Mn)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const e=this.header.length-Ve,r=new DataView(n,Ve);let o=0;for(;o<e;){const s=r.getUint32(o,!0);o+=4;const f=r.getUint32(o,!0);if(o+=4,f===Yt.JSON){const u=new Uint8Array(n,Ve+o,s);this.content=tt(u)}else if(f===Yt.BIN){const u=Ve+o;this.body=n.slice(u,u+s)}o+=s}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class so{constructor(n,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=X.KHR_DRACO_MESH_COMPRESSION,this.json=n,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(n,t){const e=this.json,r=this.dracoLoader,o=n.extensions[this.name].bufferView,s=n.extensions[this.name].attributes,f={},u={},p={};for(const g in s){const _=Rt[g]||g.toLowerCase();f[_]=s[g]}for(const g in n.attributes){const _=Rt[g]||g.toLowerCase();if(s[g]!==void 0){const E=e.accessors[n.attributes[g]],L=Fe[E.componentType];p[_]=L.name,u[_]=E.normalized===!0}}return t.getDependency("bufferView",o).then(function(g){return new Promise(function(_,E){r.decodeDracoFile(g,function(L){for(const x in L.attributes){const P=L.attributes[x],b=u[x];b!==void 0&&(P.normalized=b)}_(L)},f,p,Me,E)})})}}class io{constructor(){this.name=X.KHR_TEXTURE_TRANSFORM}extendTexture(n,t){return(t.texCoord===void 0||t.texCoord===n.channel)&&t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(n=n.clone(),t.texCoord!==void 0&&(n.channel=t.texCoord),t.offset!==void 0&&n.offset.fromArray(t.offset),t.rotation!==void 0&&(n.rotation=t.rotation),t.scale!==void 0&&n.repeat.fromArray(t.scale),n.needsUpdate=!0),n}}class ao{constructor(){this.name=X.KHR_MESH_QUANTIZATION}}class Rn extends gr{constructor(n,t,e,r){super(n,t,e,r)}copySampleValue_(n){const t=this.resultBuffer,e=this.sampleValues,r=this.valueSize,o=n*r*3+r;for(let s=0;s!==r;s++)t[s]=e[o+s];return t}interpolate_(n,t,e,r){const o=this.resultBuffer,s=this.sampleValues,f=this.valueSize,u=f*2,p=f*3,g=r-t,_=(e-t)/g,E=_*_,L=E*_,x=n*p,P=x-p,b=-2*L+3*E,M=L-E,I=1-b,S=M-E+_;for(let R=0;R!==f;R++){const O=s[P+R+f],d=s[P+R+u]*g,T=s[x+R+f],c=s[x+R]*g;o[R]=I*O+S*d+b*T+M*c}return o}}const lo=new et;class co extends Rn{interpolate_(n,t,e,r){const o=super.interpolate_(n,t,e,r);return lo.fromArray(o).normalize().toArray(o),o}}const me={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},Fe={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},Xt={9728:er,9729:gn,9984:Jn,9985:$n,9986:Qn,9987:mn},Wt={33071:nr,33648:tr,10497:Tt},ut={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Rt={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",...En>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"},COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Pe={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},uo={CUBICSPLINE:void 0,LINEAR:_n,STEP:pr},ft={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function fo(y){return y.DefaultMaterial===void 0&&(y.DefaultMaterial=new yn({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:mr})),y.DefaultMaterial}function De(y,n,t){for(const e in t.extensions)y[e]===void 0&&(n.userData.gltfExtensions=n.userData.gltfExtensions||{},n.userData.gltfExtensions[e]=t.extensions[e])}function Te(y,n){n.extras!==void 0&&(typeof n.extras=="object"?Object.assign(y.userData,n.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+n.extras))}function ho(y,n,t){let e=!1,r=!1,o=!1;for(let p=0,g=n.length;p<g;p++){const _=n[p];if(_.POSITION!==void 0&&(e=!0),_.NORMAL!==void 0&&(r=!0),_.COLOR_0!==void 0&&(o=!0),e&&r&&o)break}if(!e&&!r&&!o)return Promise.resolve(y);const s=[],f=[],u=[];for(let p=0,g=n.length;p<g;p++){const _=n[p];if(e){const E=_.POSITION!==void 0?t.getDependency("accessor",_.POSITION):y.attributes.position;s.push(E)}if(r){const E=_.NORMAL!==void 0?t.getDependency("accessor",_.NORMAL):y.attributes.normal;f.push(E)}if(o){const E=_.COLOR_0!==void 0?t.getDependency("accessor",_.COLOR_0):y.attributes.color;u.push(E)}}return Promise.all([Promise.all(s),Promise.all(f),Promise.all(u)]).then(function(p){const g=p[0],_=p[1],E=p[2];return e&&(y.morphAttributes.position=g),r&&(y.morphAttributes.normal=_),o&&(y.morphAttributes.color=E),y.morphTargetsRelative=!0,y})}function po(y,n){if(y.updateMorphTargets(),n.weights!==void 0)for(let t=0,e=n.weights.length;t<e;t++)y.morphTargetInfluences[t]=n.weights[t];if(n.extras&&Array.isArray(n.extras.targetNames)){const t=n.extras.targetNames;if(y.morphTargetInfluences.length===t.length){y.morphTargetDictionary={};for(let e=0,r=t.length;e<r;e++)y.morphTargetDictionary[t[e]]=e}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function mo(y){let n;const t=y.extensions&&y.extensions[X.KHR_DRACO_MESH_COMPRESSION];if(t?n="draco:"+t.bufferView+":"+t.indices+":"+dt(t.attributes):n=y.indices+":"+dt(y.attributes)+":"+y.mode,y.targets!==void 0)for(let e=0,r=y.targets.length;e<r;e++)n+=":"+dt(y.targets[e]);return n}function dt(y){let n="";const t=Object.keys(y).sort();for(let e=0,r=t.length;e<r;e++)n+=t[e]+":"+y[t[e]]+";";return n}function St(y){switch(y){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function go(y){return y.search(/\.jpe?g($|\?)/i)>0||y.search(/^data\:image\/jpeg/)===0?"image/jpeg":y.search(/\.webp($|\?)/i)>0||y.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const yo=new Ue;class bo{constructor(n={},t={}){this.json=n,this.extensions={},this.plugins={},this.options=t,this.cache=new Fr,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let e=!1,r=!1,o=-1;typeof navigator<"u"&&typeof navigator.userAgent<"u"&&(e=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,r=navigator.userAgent.indexOf("Firefox")>-1,o=r?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||e||r&&o<98?this.textureLoader=new Wn(this.options.manager):this.textureLoader=new Zn(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new dn(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(n){this.extensions=n}setPlugins(n){this.plugins=n}parse(n,t){const e=this,r=this.json,o=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(s){return s._markDefs&&s._markDefs()}),Promise.all(this._invokeAll(function(s){return s.beforeRoot&&s.beforeRoot()})).then(function(){return Promise.all([e.getDependencies("scene"),e.getDependencies("animation"),e.getDependencies("camera")])}).then(function(s){const f={scene:s[0][r.scene||0],scenes:s[0],animations:s[1],cameras:s[2],asset:r.asset,parser:e,userData:{}};return De(o,f,r),Te(f,r),Promise.all(e._invokeAll(function(u){return u.afterRoot&&u.afterRoot(f)})).then(function(){for(const u of f.scenes)u.updateMatrixWorld();n(f)})}).catch(t)}_markDefs(){const n=this.json.nodes||[],t=this.json.skins||[],e=this.json.meshes||[];for(let r=0,o=t.length;r<o;r++){const s=t[r].joints;for(let f=0,u=s.length;f<u;f++)n[s[f]].isBone=!0}for(let r=0,o=n.length;r<o;r++){const s=n[r];s.mesh!==void 0&&(this._addNodeRef(this.meshCache,s.mesh),s.skin!==void 0&&(e[s.mesh].isSkinnedMesh=!0)),s.camera!==void 0&&this._addNodeRef(this.cameraCache,s.camera)}}_addNodeRef(n,t){t!==void 0&&(n.refs[t]===void 0&&(n.refs[t]=n.uses[t]=0),n.refs[t]++)}_getNodeRef(n,t,e){if(n.refs[t]<=1)return e;const r=e.clone(),o=(s,f)=>{const u=this.associations.get(s);u!=null&&this.associations.set(f,u);for(const[p,g]of s.children.entries())o(g,f.children[p])};return o(e,r),r.name+="_instance_"+n.uses[t]++,r}_invokeOne(n){const t=Object.values(this.plugins);t.push(this);for(let e=0;e<t.length;e++){const r=n(t[e]);if(r)return r}return null}_invokeAll(n){const t=Object.values(this.plugins);t.unshift(this);const e=[];for(let r=0;r<t.length;r++){const o=n(t[r]);o&&e.push(o)}return e}getDependency(n,t){const e=n+":"+t;let r=this.cache.get(e);if(!r){switch(n){case"scene":r=this.loadScene(t);break;case"node":r=this._invokeOne(function(o){return o.loadNode&&o.loadNode(t)});break;case"mesh":r=this._invokeOne(function(o){return o.loadMesh&&o.loadMesh(t)});break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this._invokeOne(function(o){return o.loadBufferView&&o.loadBufferView(t)});break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this._invokeOne(function(o){return o.loadMaterial&&o.loadMaterial(t)});break;case"texture":r=this._invokeOne(function(o){return o.loadTexture&&o.loadTexture(t)});break;case"skin":r=this.loadSkin(t);break;case"animation":r=this._invokeOne(function(o){return o.loadAnimation&&o.loadAnimation(t)});break;case"camera":r=this.loadCamera(t);break;default:if(r=this._invokeOne(function(o){return o!=this&&o.getDependency&&o.getDependency(n,t)}),!r)throw new Error("Unknown type: "+n);break}this.cache.add(e,r)}return r}getDependencies(n){let t=this.cache.get(n);if(!t){const e=this,r=this.json[n+(n==="mesh"?"es":"s")]||[];t=Promise.all(r.map(function(o,s){return e.getDependency(n,s)})),this.cache.add(n,t)}return t}loadBuffer(n){const t=this.json.buffers[n],e=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&n===0)return Promise.resolve(this.extensions[X.KHR_BINARY_GLTF].body);const r=this.options;return new Promise(function(o,s){e.load(Ye.resolveURL(t.uri,r.path),o,void 0,function(){s(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(n){const t=this.json.bufferViews[n];return this.getDependency("buffer",t.buffer).then(function(e){const r=t.byteLength||0,o=t.byteOffset||0;return e.slice(o,o+r)})}loadAccessor(n){const t=this,e=this.json,r=this.json.accessors[n];if(r.bufferView===void 0&&r.sparse===void 0){const s=ut[r.type],f=Fe[r.componentType],u=r.normalized===!0,p=new f(r.count*s);return Promise.resolve(new it(p,s,u))}const o=[];return r.bufferView!==void 0?o.push(this.getDependency("bufferView",r.bufferView)):o.push(null),r.sparse!==void 0&&(o.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),o.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(o).then(function(s){const f=s[0],u=ut[r.type],p=Fe[r.componentType],g=p.BYTES_PER_ELEMENT,_=g*u,E=r.byteOffset||0,L=r.bufferView!==void 0?e.bufferViews[r.bufferView].byteStride:void 0,x=r.normalized===!0;let P,b;if(L&&L!==_){const M=Math.floor(E/L),I="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+M+":"+r.count;let S=t.cache.get(I);S||(P=new p(f,M*L,r.count*L/g),S=new pn(P,L/g),t.cache.add(I,S)),b=new Et(S,u,E%L/g,x)}else f===null?P=new p(r.count*u):P=new p(f,E,r.count*u),b=new it(P,u,x);if(r.sparse!==void 0){const M=ut.SCALAR,I=Fe[r.sparse.indices.componentType],S=r.sparse.indices.byteOffset||0,R=r.sparse.values.byteOffset||0,O=new I(s[1],S,r.sparse.count*M),d=new p(s[2],R,r.sparse.count*u);f!==null&&(b=new it(b.array.slice(),b.itemSize,b.normalized));for(let T=0,c=O.length;T<c;T++){const l=O[T];if(b.setX(l,d[T*u]),u>=2&&b.setY(l,d[T*u+1]),u>=3&&b.setZ(l,d[T*u+2]),u>=4&&b.setW(l,d[T*u+3]),u>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return b})}loadTexture(n){const t=this.json,e=this.options,o=t.textures[n].source,s=t.images[o];let f=this.textureLoader;if(s.uri){const u=e.manager.getHandler(s.uri);u!==null&&(f=u)}return this.loadTextureImage(n,o,f)}loadTextureImage(n,t,e){const r=this,o=this.json,s=o.textures[n],f=o.images[t],u=(f.uri||f.bufferView)+":"+s.sampler;if(this.textureCache[u])return this.textureCache[u];const p=this.loadImageSource(t,e).then(function(g){g.flipY=!1,g.name=s.name||f.name||"",g.name===""&&typeof f.uri=="string"&&f.uri.startsWith("data:image/")===!1&&(g.name=f.uri);const E=(o.samplers||{})[s.sampler]||{};return g.magFilter=Xt[E.magFilter]||gn,g.minFilter=Xt[E.minFilter]||mn,g.wrapS=Wt[E.wrapS]||Tt,g.wrapT=Wt[E.wrapT]||Tt,r.associations.set(g,{textures:n}),g}).catch(function(){return null});return this.textureCache[u]=p,p}loadImageSource(n,t){const e=this,r=this.json,o=this.options;if(this.sourceCache[n]!==void 0)return this.sourceCache[n].then(_=>_.clone());const s=r.images[n],f=self.URL||self.webkitURL;let u=s.uri||"",p=!1;if(s.bufferView!==void 0)u=e.getDependency("bufferView",s.bufferView).then(function(_){p=!0;const E=new Blob([_],{type:s.mimeType});return u=f.createObjectURL(E),u});else if(s.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+n+" is missing URI and bufferView");const g=Promise.resolve(u).then(function(_){return new Promise(function(E,L){let x=E;t.isImageBitmapLoader===!0&&(x=function(P){const b=new kt(P);b.needsUpdate=!0,E(b)}),t.load(Ye.resolveURL(_,o.path),x,void 0,L)})}).then(function(_){return p===!0&&f.revokeObjectURL(u),Te(_,s),_.userData.mimeType=s.mimeType||go(s.uri),_}).catch(function(_){throw console.error("THREE.GLTFLoader: Couldn't load texture",u),_});return this.sourceCache[n]=g,g}assignTexture(n,t,e,r){const o=this;return this.getDependency("texture",e.index).then(function(s){if(!s)return null;if(e.texCoord!==void 0&&e.texCoord>0&&(s=s.clone(),s.channel=e.texCoord),o.extensions[X.KHR_TEXTURE_TRANSFORM]){const f=e.extensions!==void 0?e.extensions[X.KHR_TEXTURE_TRANSFORM]:void 0;if(f){const u=o.associations.get(s);s=o.extensions[X.KHR_TEXTURE_TRANSFORM].extendTexture(s,f),o.associations.set(s,u)}}return r!==void 0&&(typeof r=="number"&&(r=r===qt?Oe:Me),"colorSpace"in s?s.colorSpace=r:s.encoding=r===Oe?qt:jr),n[t]=s,s})}assignFinalMaterial(n){const t=n.geometry;let e=n.material;const r=t.attributes.tangent===void 0,o=t.attributes.color!==void 0,s=t.attributes.normal===void 0;if(n.isPoints){const f="PointsMaterial:"+e.uuid;let u=this.cache.get(f);u||(u=new rr,at.prototype.copy.call(u,e),u.color.copy(e.color),u.map=e.map,u.sizeAttenuation=!1,this.cache.add(f,u)),e=u}else if(n.isLine){const f="LineBasicMaterial:"+e.uuid;let u=this.cache.get(f);u||(u=new or,at.prototype.copy.call(u,e),u.color.copy(e.color),u.map=e.map,this.cache.add(f,u)),e=u}if(r||o||s){let f="ClonedMaterial:"+e.uuid+":";r&&(f+="derivative-tangents:"),o&&(f+="vertex-colors:"),s&&(f+="flat-shading:");let u=this.cache.get(f);u||(u=e.clone(),o&&(u.vertexColors=!0),s&&(u.flatShading=!0),r&&(u.normalScale&&(u.normalScale.y*=-1),u.clearcoatNormalScale&&(u.clearcoatNormalScale.y*=-1)),this.cache.add(f,u),this.associations.set(u,this.associations.get(e))),e=u}n.material=e}getMaterialType(){return yn}loadMaterial(n){const t=this,e=this.json,r=this.extensions,o=e.materials[n];let s;const f={},u=o.extensions||{},p=[];if(u[X.KHR_MATERIALS_UNLIT]){const _=r[X.KHR_MATERIALS_UNLIT];s=_.getMaterialType(),p.push(_.extendParams(f,o,t))}else{const _=o.pbrMetallicRoughness||{};if(f.color=new pe(1,1,1),f.opacity=1,Array.isArray(_.baseColorFactor)){const E=_.baseColorFactor;f.color.setRGB(E[0],E[1],E[2],Me),f.opacity=E[3]}_.baseColorTexture!==void 0&&p.push(t.assignTexture(f,"map",_.baseColorTexture,Oe)),f.metalness=_.metallicFactor!==void 0?_.metallicFactor:1,f.roughness=_.roughnessFactor!==void 0?_.roughnessFactor:1,_.metallicRoughnessTexture!==void 0&&(p.push(t.assignTexture(f,"metalnessMap",_.metallicRoughnessTexture)),p.push(t.assignTexture(f,"roughnessMap",_.metallicRoughnessTexture))),s=this._invokeOne(function(E){return E.getMaterialType&&E.getMaterialType(n)}),p.push(Promise.all(this._invokeAll(function(E){return E.extendMaterialParams&&E.extendMaterialParams(n,f)})))}o.doubleSided===!0&&(f.side=bn);const g=o.alphaMode||ft.OPAQUE;if(g===ft.BLEND?(f.transparent=!0,f.depthWrite=!1):(f.transparent=!1,g===ft.MASK&&(f.alphaTest=o.alphaCutoff!==void 0?o.alphaCutoff:.5)),o.normalTexture!==void 0&&s!==Ke&&(p.push(t.assignTexture(f,"normalMap",o.normalTexture)),f.normalScale=new he(1,1),o.normalTexture.scale!==void 0)){const _=o.normalTexture.scale;f.normalScale.set(_,_)}if(o.occlusionTexture!==void 0&&s!==Ke&&(p.push(t.assignTexture(f,"aoMap",o.occlusionTexture)),o.occlusionTexture.strength!==void 0&&(f.aoMapIntensity=o.occlusionTexture.strength)),o.emissiveFactor!==void 0&&s!==Ke){const _=o.emissiveFactor;f.emissive=new pe().setRGB(_[0],_[1],_[2],Me)}return o.emissiveTexture!==void 0&&s!==Ke&&p.push(t.assignTexture(f,"emissiveMap",o.emissiveTexture,Oe)),Promise.all(p).then(function(){const _=new s(f);return o.name&&(_.name=o.name),Te(_,o),t.associations.set(_,{materials:n}),o.extensions&&De(r,_,o),_})}createUniqueName(n){const t=sr.sanitizeNodeName(n||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(n){const t=this,e=this.extensions,r=this.primitiveCache;function o(f){return e[X.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(f,t).then(function(u){return Zt(u,f,t)})}const s=[];for(let f=0,u=n.length;f<u;f++){const p=n[f],g=mo(p),_=r[g];if(_)s.push(_.promise);else{let E;p.extensions&&p.extensions[X.KHR_DRACO_MESH_COMPRESSION]?E=o(p):E=Zt(new vn,p,t),r[g]={primitive:p,promise:E},s.push(E)}}return Promise.all(s)}loadMesh(n){const t=this,e=this.json,r=this.extensions,o=e.meshes[n],s=o.primitives,f=[];for(let u=0,p=s.length;u<p;u++){const g=s[u].material===void 0?fo(this.cache):this.getDependency("material",s[u].material);f.push(g)}return f.push(t.loadGeometries(s)),Promise.all(f).then(function(u){const p=u.slice(0,u.length-1),g=u[u.length-1],_=[];for(let L=0,x=g.length;L<x;L++){const P=g[L],b=s[L];let M;const I=p[L];if(b.mode===me.TRIANGLES||b.mode===me.TRIANGLE_STRIP||b.mode===me.TRIANGLE_FAN||b.mode===void 0)M=o.isSkinnedMesh===!0?new ir(P,I):new ln(P,I),M.isSkinnedMesh===!0&&M.normalizeSkinWeights(),b.mode===me.TRIANGLE_STRIP?M.geometry=Gt(M.geometry,an):b.mode===me.TRIANGLE_FAN&&(M.geometry=Gt(M.geometry,At));else if(b.mode===me.LINES)M=new ar(P,I);else if(b.mode===me.LINE_STRIP)M=new lr(P,I);else if(b.mode===me.LINE_LOOP)M=new cr(P,I);else if(b.mode===me.POINTS)M=new ur(P,I);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+b.mode);Object.keys(M.geometry.morphAttributes).length>0&&po(M,o),M.name=t.createUniqueName(o.name||"mesh_"+n),Te(M,o),b.extensions&&De(r,M,b),t.assignFinalMaterial(M),_.push(M)}for(let L=0,x=_.length;L<x;L++)t.associations.set(_[L],{meshes:n,primitives:L});if(_.length===1)return o.extensions&&De(r,_[0],o),_[0];const E=new lt;o.extensions&&De(r,E,o),t.associations.set(E,{meshes:n});for(let L=0,x=_.length;L<x;L++)E.add(_[L]);return E})}loadCamera(n){let t;const e=this.json.cameras[n],r=e[e.type];if(!r){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return e.type==="perspective"?t=new qe(nt.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):e.type==="orthographic"&&(t=new Qe(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),e.name&&(t.name=this.createUniqueName(e.name)),Te(t,e),Promise.resolve(t)}loadSkin(n){const t=this.json.skins[n],e=[];for(let r=0,o=t.joints.length;r<o;r++)e.push(this._loadNodeShallow(t.joints[r]));return t.inverseBindMatrices!==void 0?e.push(this.getDependency("accessor",t.inverseBindMatrices)):e.push(null),Promise.all(e).then(function(r){const o=r.pop(),s=r,f=[],u=[];for(let p=0,g=s.length;p<g;p++){const _=s[p];if(_){f.push(_);const E=new Ue;o!==null&&E.fromArray(o.array,p*16),u.push(E)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[p])}return new fr(f,u)})}loadAnimation(n){const t=this.json,e=this,r=t.animations[n],o=r.name?r.name:"animation_"+n,s=[],f=[],u=[],p=[],g=[];for(let _=0,E=r.channels.length;_<E;_++){const L=r.channels[_],x=r.samplers[L.sampler],P=L.target,b=P.node,M=r.parameters!==void 0?r.parameters[x.input]:x.input,I=r.parameters!==void 0?r.parameters[x.output]:x.output;P.node!==void 0&&(s.push(this.getDependency("node",b)),f.push(this.getDependency("accessor",M)),u.push(this.getDependency("accessor",I)),p.push(x),g.push(P))}return Promise.all([Promise.all(s),Promise.all(f),Promise.all(u),Promise.all(p),Promise.all(g)]).then(function(_){const E=_[0],L=_[1],x=_[2],P=_[3],b=_[4],M=[];for(let I=0,S=E.length;I<S;I++){const R=E[I],O=L[I],d=x[I],T=P[I],c=b[I];if(R===void 0)continue;R.updateMatrix&&R.updateMatrix();const l=e._createAnimationTracks(R,O,d,T,c);if(l)for(let i=0;i<l.length;i++)M.push(l[i])}return new dr(o,void 0,M)})}createNodeMesh(n){const t=this.json,e=this,r=t.nodes[n];return r.mesh===void 0?null:e.getDependency("mesh",r.mesh).then(function(o){const s=e._getNodeRef(e.meshCache,r.mesh,o);return r.weights!==void 0&&s.traverse(function(f){if(f.isMesh)for(let u=0,p=r.weights.length;u<p;u++)f.morphTargetInfluences[u]=r.weights[u]}),s})}loadNode(n){const t=this.json,e=this,r=t.nodes[n],o=e._loadNodeShallow(n),s=[],f=r.children||[];for(let p=0,g=f.length;p<g;p++)s.push(e.getDependency("node",f[p]));const u=r.skin===void 0?Promise.resolve(null):e.getDependency("skin",r.skin);return Promise.all([o,Promise.all(s),u]).then(function(p){const g=p[0],_=p[1],E=p[2];E!==null&&g.traverse(function(L){L.isSkinnedMesh&&L.bind(E,yo)});for(let L=0,x=_.length;L<x;L++)g.add(_[L]);return g})}_loadNodeShallow(n){const t=this.json,e=this.extensions,r=this;if(this.nodeCache[n]!==void 0)return this.nodeCache[n];const o=t.nodes[n],s=o.name?r.createUniqueName(o.name):"",f=[],u=r._invokeOne(function(p){return p.createNodeMesh&&p.createNodeMesh(n)});return u&&f.push(u),o.camera!==void 0&&f.push(r.getDependency("camera",o.camera).then(function(p){return r._getNodeRef(r.cameraCache,o.camera,p)})),r._invokeAll(function(p){return p.createNodeAttachment&&p.createNodeAttachment(n)}).forEach(function(p){f.push(p)}),this.nodeCache[n]=Promise.all(f).then(function(p){let g;if(o.isBone===!0?g=new hr:p.length>1?g=new lt:p.length===1?g=p[0]:g=new hn,g!==p[0])for(let _=0,E=p.length;_<E;_++)g.add(p[_]);if(o.name&&(g.userData.name=o.name,g.name=s),Te(g,o),o.extensions&&De(e,g,o),o.matrix!==void 0){const _=new Ue;_.fromArray(o.matrix),g.applyMatrix4(_)}else o.translation!==void 0&&g.position.fromArray(o.translation),o.rotation!==void 0&&g.quaternion.fromArray(o.rotation),o.scale!==void 0&&g.scale.fromArray(o.scale);return r.associations.has(g)||r.associations.set(g,{}),r.associations.get(g).nodes=n,g}),this.nodeCache[n]}loadScene(n){const t=this.extensions,e=this.json.scenes[n],r=this,o=new lt;e.name&&(o.name=r.createUniqueName(e.name)),Te(o,e),e.extensions&&De(t,o,e);const s=e.nodes||[],f=[];for(let u=0,p=s.length;u<p;u++)f.push(r.getDependency("node",s[u]));return Promise.all(f).then(function(u){for(let g=0,_=u.length;g<_;g++)o.add(u[g]);const p=g=>{const _=new Map;for(const[E,L]of r.associations)(E instanceof at||E instanceof kt)&&_.set(E,L);return g.traverse(E=>{const L=r.associations.get(E);L!=null&&_.set(E,L)}),_};return r.associations=p(o),o})}_createAnimationTracks(n,t,e,r,o){const s=[],f=n.name?n.name:n.uuid,u=[];Pe[o.path]===Pe.weights?n.traverse(function(E){E.morphTargetInfluences&&u.push(E.name?E.name:E.uuid)}):u.push(f);let p;switch(Pe[o.path]){case Pe.weights:p=Bt;break;case Pe.rotation:p=Ft;break;case Pe.position:case Pe.scale:p=jt;break;default:switch(e.itemSize){case 1:p=Bt;break;case 2:case 3:default:p=jt;break}break}const g=r.interpolation!==void 0?uo[r.interpolation]:_n,_=this._getArrayFromAccessor(e);for(let E=0,L=u.length;E<L;E++){const x=new p(u[E]+"."+Pe[o.path],t.array,_,g);r.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(x),s.push(x)}return s}_getArrayFromAccessor(n){let t=n.array;if(n.normalized){const e=St(t.constructor),r=new Float32Array(t.length);for(let o=0,s=t.length;o<s;o++)r[o]=t[o]*e;t=r}return t}_createCubicSplineTrackInterpolant(n){n.createInterpolant=function(e){const r=this instanceof Ft?co:Rn;return new r(this.times,this.values,this.getValueSize()/3,e)},n.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function vo(y,n,t){const e=n.attributes,r=new yr;if(e.POSITION!==void 0){const f=t.json.accessors[e.POSITION],u=f.min,p=f.max;if(u!==void 0&&p!==void 0){if(r.set(new ee(u[0],u[1],u[2]),new ee(p[0],p[1],p[2])),f.normalized){const g=St(Fe[f.componentType]);r.min.multiplyScalar(g),r.max.multiplyScalar(g)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const o=n.targets;if(o!==void 0){const f=new ee,u=new ee;for(let p=0,g=o.length;p<g;p++){const _=o[p];if(_.POSITION!==void 0){const E=t.json.accessors[_.POSITION],L=E.min,x=E.max;if(L!==void 0&&x!==void 0){if(u.setX(Math.max(Math.abs(L[0]),Math.abs(x[0]))),u.setY(Math.max(Math.abs(L[1]),Math.abs(x[1]))),u.setZ(Math.max(Math.abs(L[2]),Math.abs(x[2]))),E.normalized){const P=St(Fe[E.componentType]);u.multiplyScalar(P)}f.max(u)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(f)}y.boundingBox=r;const s=new br;r.getCenter(s.center),s.radius=r.min.distanceTo(r.max)/2,y.boundingSphere=s}function Zt(y,n,t){const e=n.attributes,r=[];function o(s,f){return t.getDependency("accessor",s).then(function(u){y.setAttribute(f,u)})}for(const s in e){const f=Rt[s]||s.toLowerCase();f in y.attributes||r.push(o(e[s],f))}if(n.indices!==void 0&&!y.index){const s=t.getDependency("accessor",n.indices).then(function(f){y.setIndex(f)});r.push(s)}return Te(y,n),vo(y,n,t),Promise.all(r).then(function(){return n.targets!==void 0?ho(y,n.targets,t):y})}/*!
 * camera-controls
 * https://github.com/yomotsu/camera-controls
 * (c) 2017 @yomotsu
 * Released under the MIT License.
 */var ht;/Mac/.test((ht=globalThis?.navigator)===null||ht===void 0?void 0:ht.platform);function Ze(y){throw new Error('Could not dynamically require "'+y+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pt={exports:{}},Qt;function _o(){return Qt||(Qt=1,(function(y,n){(function(t){y.exports=t()})(function(){return(function t(e,r,o){function s(p,g){if(!r[p]){if(!e[p]){var _=typeof Ze=="function"&&Ze;if(!g&&_)return _(p,!0);if(f)return f(p,!0);throw new Error("Cannot find module '"+p+"'")}g=r[p]={exports:{}},e[p][0].call(g.exports,function(E){var L=e[p][1][E];return s(L||E)},g,g.exports,t,e,r,o)}return r[p].exports}for(var f=typeof Ze=="function"&&Ze,u=0;u<o.length;u++)s(o[u]);return s})({1:[function(t,e,r){(function(o,s,f,u,p,g,_,E,L){var x=t("crypto");function P(d,T){T=I(d,T);var c;return(c=T.algorithm!=="passthrough"?x.createHash(T.algorithm):new O).write===void 0&&(c.write=c.update,c.end=c.update),R(T,c).dispatch(d),c.update||c.end(""),c.digest?c.digest(T.encoding==="buffer"?void 0:T.encoding):(d=c.read(),T.encoding!=="buffer"?d.toString(T.encoding):d)}(r=e.exports=P).sha1=function(d){return P(d)},r.keys=function(d){return P(d,{excludeValues:!0,algorithm:"sha1",encoding:"hex"})},r.MD5=function(d){return P(d,{algorithm:"md5",encoding:"hex"})},r.keysMD5=function(d){return P(d,{algorithm:"md5",encoding:"hex",excludeValues:!0})};var b=x.getHashes?x.getHashes().slice():["sha1","md5"],M=(b.push("passthrough"),["buffer","hex","binary","base64"]);function I(d,T){var c={};if(c.algorithm=(T=T||{}).algorithm||"sha1",c.encoding=T.encoding||"hex",c.excludeValues=!!T.excludeValues,c.algorithm=c.algorithm.toLowerCase(),c.encoding=c.encoding.toLowerCase(),c.ignoreUnknown=T.ignoreUnknown===!0,c.respectType=T.respectType!==!1,c.respectFunctionNames=T.respectFunctionNames!==!1,c.respectFunctionProperties=T.respectFunctionProperties!==!1,c.unorderedArrays=T.unorderedArrays===!0,c.unorderedSets=T.unorderedSets!==!1,c.unorderedObjects=T.unorderedObjects!==!1,c.replacer=T.replacer||void 0,c.excludeKeys=T.excludeKeys||void 0,d===void 0)throw new Error("Object argument required.");for(var l=0;l<b.length;++l)b[l].toLowerCase()===c.algorithm.toLowerCase()&&(c.algorithm=b[l]);if(b.indexOf(c.algorithm)===-1)throw new Error('Algorithm "'+c.algorithm+'"  not supported. supported values: '+b.join(", "));if(M.indexOf(c.encoding)===-1&&c.algorithm!=="passthrough")throw new Error('Encoding "'+c.encoding+'"  not supported. supported values: '+M.join(", "));return c}function S(d){if(typeof d=="function")return/^function\s+\w*\s*\(\s*\)\s*{\s+\[native code\]\s+}$/i.exec(Function.prototype.toString.call(d))!=null}function R(d,T,c){c=c||[];function l(i){return T.update?T.update(i,"utf8"):T.write(i,"utf8")}return{dispatch:function(i){return this["_"+((i=d.replacer?d.replacer(i):i)===null?"null":typeof i)](i)},_object:function(i){var m,A=Object.prototype.toString.call(i),U=/\[object (.*)\]/i.exec(A);if(U=(U=U?U[1]:"unknown:["+A+"]").toLowerCase(),0<=(A=c.indexOf(i)))return this.dispatch("[CIRCULAR:"+A+"]");if(c.push(i),f!==void 0&&f.isBuffer&&f.isBuffer(i))return l("buffer:"),l(i);if(U==="object"||U==="function"||U==="asyncfunction")return A=Object.keys(i),d.unorderedObjects&&(A=A.sort()),d.respectType===!1||S(i)||A.splice(0,0,"prototype","__proto__","constructor"),d.excludeKeys&&(A=A.filter(function(F){return!d.excludeKeys(F)})),l("object:"+A.length+":"),m=this,A.forEach(function(F){m.dispatch(F),l(":"),d.excludeValues||m.dispatch(i[F]),l(",")});if(!this["_"+U]){if(d.ignoreUnknown)return l("["+U+"]");throw new Error('Unknown object type "'+U+'"')}this["_"+U](i)},_array:function(i,F){F=F!==void 0?F:d.unorderedArrays!==!1;var A=this;if(l("array:"+i.length+":"),!F||i.length<=1)return i.forEach(function(H){return A.dispatch(H)});var U=[],F=i.map(function(H){var D=new O,Y=c.slice();return R(d,D,Y).dispatch(H),U=U.concat(Y.slice(c.length)),D.read().toString()});return c=c.concat(U),F.sort(),this._array(F,!1)},_date:function(i){return l("date:"+i.toJSON())},_symbol:function(i){return l("symbol:"+i.toString())},_error:function(i){return l("error:"+i.toString())},_boolean:function(i){return l("bool:"+i.toString())},_string:function(i){l("string:"+i.length+":"),l(i.toString())},_function:function(i){l("fn:"),S(i)?this.dispatch("[native]"):this.dispatch(i.toString()),d.respectFunctionNames!==!1&&this.dispatch("function-name:"+String(i.name)),d.respectFunctionProperties&&this._object(i)},_number:function(i){return l("number:"+i.toString())},_xml:function(i){return l("xml:"+i.toString())},_null:function(){return l("Null")},_undefined:function(){return l("Undefined")},_regexp:function(i){return l("regex:"+i.toString())},_uint8array:function(i){return l("uint8array:"),this.dispatch(Array.prototype.slice.call(i))},_uint8clampedarray:function(i){return l("uint8clampedarray:"),this.dispatch(Array.prototype.slice.call(i))},_int8array:function(i){return l("int8array:"),this.dispatch(Array.prototype.slice.call(i))},_uint16array:function(i){return l("uint16array:"),this.dispatch(Array.prototype.slice.call(i))},_int16array:function(i){return l("int16array:"),this.dispatch(Array.prototype.slice.call(i))},_uint32array:function(i){return l("uint32array:"),this.dispatch(Array.prototype.slice.call(i))},_int32array:function(i){return l("int32array:"),this.dispatch(Array.prototype.slice.call(i))},_float32array:function(i){return l("float32array:"),this.dispatch(Array.prototype.slice.call(i))},_float64array:function(i){return l("float64array:"),this.dispatch(Array.prototype.slice.call(i))},_arraybuffer:function(i){return l("arraybuffer:"),this.dispatch(new Uint8Array(i))},_url:function(i){return l("url:"+i.toString())},_map:function(i){return l("map:"),i=Array.from(i),this._array(i,d.unorderedSets!==!1)},_set:function(i){return l("set:"),i=Array.from(i),this._array(i,d.unorderedSets!==!1)},_file:function(i){return l("file:"),this.dispatch([i.name,i.size,i.type,i.lastModfied])},_blob:function(){if(d.ignoreUnknown)return l("[blob]");throw Error(`Hashing Blob objects is currently not supported
(see https://github.com/puleos/object-hash/issues/26)
Use "options.replacer" or "options.ignoreUnknown"
`)},_domwindow:function(){return l("domwindow")},_bigint:function(i){return l("bigint:"+i.toString())},_process:function(){return l("process")},_timer:function(){return l("timer")},_pipe:function(){return l("pipe")},_tcp:function(){return l("tcp")},_udp:function(){return l("udp")},_tty:function(){return l("tty")},_statwatcher:function(){return l("statwatcher")},_securecontext:function(){return l("securecontext")},_connection:function(){return l("connection")},_zlib:function(){return l("zlib")},_context:function(){return l("context")},_nodescript:function(){return l("nodescript")},_httpparser:function(){return l("httpparser")},_dataview:function(){return l("dataview")},_signal:function(){return l("signal")},_fsevent:function(){return l("fsevent")},_tlswrap:function(){return l("tlswrap")}}}function O(){return{buf:"",write:function(d){this.buf+=d},end:function(d){this.buf+=d},read:function(){return this.buf}}}r.writeToStream=function(d,T,c){return c===void 0&&(c=T,T={}),R(T=I(d,T),c).dispatch(d)}}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/fake_9a5aa49d.js","/")},{buffer:3,crypto:5,lYpoI2:11}],2:[function(t,e,r){(function(o,s,f,u,p,g,_,E,L){(function(x){var P=typeof Uint8Array<"u"?Uint8Array:Array,b=43,M=47,I=48,S=97,R=65,O=45,d=95;function T(c){return c=c.charCodeAt(0),c===b||c===O?62:c===M||c===d?63:c<I?-1:c<I+10?c-I+26+26:c<R+26?c-R:c<S+26?c-S+26:void 0}x.toByteArray=function(c){var l,i;if(0<c.length%4)throw new Error("Invalid string. Length must be a multiple of 4");var m=c.length,m=c.charAt(m-2)==="="?2:c.charAt(m-1)==="="?1:0,A=new P(3*c.length/4-m),U=0<m?c.length-4:c.length,F=0;function H(D){A[F++]=D}for(l=0;l<U;l+=4,0)H((16711680&(i=T(c.charAt(l))<<18|T(c.charAt(l+1))<<12|T(c.charAt(l+2))<<6|T(c.charAt(l+3))))>>16),H((65280&i)>>8),H(255&i);return m==2?H(255&(i=T(c.charAt(l))<<2|T(c.charAt(l+1))>>4)):m==1&&(H((i=T(c.charAt(l))<<10|T(c.charAt(l+1))<<4|T(c.charAt(l+2))>>2)>>8&255),H(255&i)),A},x.fromByteArray=function(c){var l,i,m,A,U=c.length%3,F="";function H(D){return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(D)}for(l=0,m=c.length-U;l<m;l+=3)i=(c[l]<<16)+(c[l+1]<<8)+c[l+2],F+=H((A=i)>>18&63)+H(A>>12&63)+H(A>>6&63)+H(63&A);switch(U){case 1:F=(F+=H((i=c[c.length-1])>>2))+H(i<<4&63)+"==";break;case 2:F=(F=(F+=H((i=(c[c.length-2]<<8)+c[c.length-1])>>10))+H(i>>4&63))+H(i<<2&63)+"="}return F}})(r===void 0?this.base64js={}:r)}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/base64-js/lib/b64.js","/node_modules/gulp-browserify/node_modules/base64-js/lib")},{buffer:3,lYpoI2:11}],3:[function(t,e,r){(function(o,s,b,u,p,g,_,E,L){var x=t("base64-js"),P=t("ieee754");function b(a,h,v){if(!(this instanceof b))return new b(a,h,v);var C,N,B,K,ne=typeof a;if(h==="base64"&&ne=="string")for(a=(K=a).trim?K.trim():K.replace(/^\s+|\s+$/g,"");a.length%4!=0;)a+="=";if(ne=="number")C=Z(a);else if(ne=="string")C=b.byteLength(a,h);else{if(ne!="object")throw new Error("First argument needs to be a number, array or string.");C=Z(a.length)}if(b._useTypedArrays?N=b._augment(new Uint8Array(C)):((N=this).length=C,N._isBuffer=!0),b._useTypedArrays&&typeof a.byteLength=="number")N._set(a);else if($(K=a)||b.isBuffer(K)||K&&typeof K=="object"&&typeof K.length=="number")for(B=0;B<C;B++)b.isBuffer(a)?N[B]=a.readUInt8(B):N[B]=a[B];else if(ne=="string")N.write(a,0,h);else if(ne=="number"&&!b._useTypedArrays&&!v)for(B=0;B<C;B++)N[B]=0;return N}function M(a,h,v,C){return b._charsWritten=ge((function(N){for(var B=[],K=0;K<N.length;K++)B.push(255&N.charCodeAt(K));return B})(h),a,v,C)}function I(a,h,v,C){return b._charsWritten=ge((function(N){for(var B,K,ne=[],se=0;se<N.length;se++)K=N.charCodeAt(se),B=K>>8,K=K%256,ne.push(K),ne.push(B);return ne})(h),a,v,C)}function S(a,h,v){var C="";v=Math.min(a.length,v);for(var N=h;N<v;N++)C+=String.fromCharCode(a[N]);return C}function R(a,h,v,B){B||(j(typeof v=="boolean","missing or invalid endian"),j(h!=null,"missing offset"),j(h+1<a.length,"Trying to read beyond buffer length"));var N,B=a.length;if(!(B<=h))return v?(N=a[h],h+1<B&&(N|=a[h+1]<<8)):(N=a[h]<<8,h+1<B&&(N|=a[h+1])),N}function O(a,h,v,B){B||(j(typeof v=="boolean","missing or invalid endian"),j(h!=null,"missing offset"),j(h+3<a.length,"Trying to read beyond buffer length"));var N,B=a.length;if(!(B<=h))return v?(h+2<B&&(N=a[h+2]<<16),h+1<B&&(N|=a[h+1]<<8),N|=a[h],h+3<B&&(N+=a[h+3]<<24>>>0)):(h+1<B&&(N=a[h+1]<<16),h+2<B&&(N|=a[h+2]<<8),h+3<B&&(N|=a[h+3]),N+=a[h]<<24>>>0),N}function d(a,h,v,C){if(C||(j(typeof v=="boolean","missing or invalid endian"),j(h!=null,"missing offset"),j(h+1<a.length,"Trying to read beyond buffer length")),!(a.length<=h))return C=R(a,h,v,!0),32768&C?-1*(65535-C+1):C}function T(a,h,v,C){if(C||(j(typeof v=="boolean","missing or invalid endian"),j(h!=null,"missing offset"),j(h+3<a.length,"Trying to read beyond buffer length")),!(a.length<=h))return C=O(a,h,v,!0),2147483648&C?-1*(4294967295-C+1):C}function c(a,h,v,C){return C||(j(typeof v=="boolean","missing or invalid endian"),j(h+3<a.length,"Trying to read beyond buffer length")),P.read(a,h,v,23,4)}function l(a,h,v,C){return C||(j(typeof v=="boolean","missing or invalid endian"),j(h+7<a.length,"Trying to read beyond buffer length")),P.read(a,h,v,52,8)}function i(a,h,v,C,N){if(N||(j(h!=null,"missing value"),j(typeof C=="boolean","missing or invalid endian"),j(v!=null,"missing offset"),j(v+1<a.length,"trying to write beyond buffer length"),Ce(h,65535)),N=a.length,!(N<=v))for(var B=0,K=Math.min(N-v,2);B<K;B++)a[v+B]=(h&255<<8*(C?B:1-B))>>>8*(C?B:1-B)}function m(a,h,v,C,N){if(N||(j(h!=null,"missing value"),j(typeof C=="boolean","missing or invalid endian"),j(v!=null,"missing offset"),j(v+3<a.length,"trying to write beyond buffer length"),Ce(h,4294967295)),N=a.length,!(N<=v))for(var B=0,K=Math.min(N-v,4);B<K;B++)a[v+B]=h>>>8*(C?B:3-B)&255}function A(a,h,v,C,N){N||(j(h!=null,"missing value"),j(typeof C=="boolean","missing or invalid endian"),j(v!=null,"missing offset"),j(v+1<a.length,"Trying to write beyond buffer length"),Se(h,32767,-32768)),a.length<=v||i(a,0<=h?h:65535+h+1,v,C,N)}function U(a,h,v,C,N){N||(j(h!=null,"missing value"),j(typeof C=="boolean","missing or invalid endian"),j(v!=null,"missing offset"),j(v+3<a.length,"Trying to write beyond buffer length"),Se(h,2147483647,-2147483648)),a.length<=v||m(a,0<=h?h:4294967295+h+1,v,C,N)}function F(a,h,v,C,N){N||(j(h!=null,"missing value"),j(typeof C=="boolean","missing or invalid endian"),j(v!=null,"missing offset"),j(v+3<a.length,"Trying to write beyond buffer length"),ke(h,34028234663852886e22,-34028234663852886e22)),a.length<=v||P.write(a,h,v,C,23,4)}function H(a,h,v,C,N){N||(j(h!=null,"missing value"),j(typeof C=="boolean","missing or invalid endian"),j(v!=null,"missing offset"),j(v+7<a.length,"Trying to write beyond buffer length"),ke(h,17976931348623157e292,-17976931348623157e292)),a.length<=v||P.write(a,h,v,C,52,8)}r.Buffer=b,r.SlowBuffer=b,r.INSPECT_MAX_BYTES=50,b.poolSize=8192,b._useTypedArrays=(function(){try{var a=new ArrayBuffer(0),h=new Uint8Array(a);return h.foo=function(){return 42},h.foo()===42&&typeof h.subarray=="function"}catch{return!1}})(),b.isEncoding=function(a){switch(String(a).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},b.isBuffer=function(a){return!(a==null||!a._isBuffer)},b.byteLength=function(a,h){var v;switch(a+="",h||"utf8"){case"hex":v=a.length/2;break;case"utf8":case"utf-8":v=ce(a).length;break;case"ascii":case"binary":case"raw":v=a.length;break;case"base64":v=Re(a).length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":v=2*a.length;break;default:throw new Error("Unknown encoding")}return v},b.concat=function(a,h){if(j($(a),`Usage: Buffer.concat(list, [totalLength])
list should be an Array.`),a.length===0)return new b(0);if(a.length===1)return a[0];if(typeof h!="number")for(N=h=0;N<a.length;N++)h+=a[N].length;for(var v=new b(h),C=0,N=0;N<a.length;N++){var B=a[N];B.copy(v,C),C+=B.length}return v},b.prototype.write=function(a,h,v,C){isFinite(h)?isFinite(v)||(C=v,v=void 0):(se=C,C=h,h=v,v=se),h=Number(h)||0;var N,B,K,ne,se=this.length-h;switch((!v||se<(v=Number(v)))&&(v=se),C=String(C||"utf8").toLowerCase()){case"hex":N=(function(W,oe,ae,re){ae=Number(ae)||0;var ie=W.length-ae;(!re||ie<(re=Number(re)))&&(re=ie),j((ie=oe.length)%2==0,"Invalid hex string"),ie/2<re&&(re=ie/2);for(var be=0;be<re;be++){var Ie=parseInt(oe.substr(2*be,2),16);j(!isNaN(Ie),"Invalid hex string"),W[ae+be]=Ie}return b._charsWritten=2*be,be})(this,a,h,v);break;case"utf8":case"utf-8":B=this,K=h,ne=v,N=b._charsWritten=ge(ce(a),B,K,ne);break;case"ascii":case"binary":N=M(this,a,h,v);break;case"base64":B=this,K=h,ne=v,N=b._charsWritten=ge(Re(a),B,K,ne);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":N=I(this,a,h,v);break;default:throw new Error("Unknown encoding")}return N},b.prototype.toString=function(a,h,v){var C,N,B,K,ne=this;if(a=String(a||"utf8").toLowerCase(),h=Number(h)||0,(v=v!==void 0?Number(v):ne.length)===h)return"";switch(a){case"hex":C=(function(se,W,oe){var ae=se.length;(!W||W<0)&&(W=0),(!oe||oe<0||ae<oe)&&(oe=ae);for(var re="",ie=W;ie<oe;ie++)re+=Q(se[ie]);return re})(ne,h,v);break;case"utf8":case"utf-8":C=(function(se,W,oe){var ae="",re="";oe=Math.min(se.length,oe);for(var ie=W;ie<oe;ie++)se[ie]<=127?(ae+=ue(re)+String.fromCharCode(se[ie]),re=""):re+="%"+se[ie].toString(16);return ae+ue(re)})(ne,h,v);break;case"ascii":case"binary":C=S(ne,h,v);break;case"base64":N=ne,K=v,C=(B=h)===0&&K===N.length?x.fromByteArray(N):x.fromByteArray(N.slice(B,K));break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":C=(function(se,W,oe){for(var ae=se.slice(W,oe),re="",ie=0;ie<ae.length;ie+=2)re+=String.fromCharCode(ae[ie]+256*ae[ie+1]);return re})(ne,h,v);break;default:throw new Error("Unknown encoding")}return C},b.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},b.prototype.copy=function(a,h,v,C){if(h=h||0,(C=C||C===0?C:this.length)!==(v=v||0)&&a.length!==0&&this.length!==0){j(v<=C,"sourceEnd < sourceStart"),j(0<=h&&h<a.length,"targetStart out of bounds"),j(0<=v&&v<this.length,"sourceStart out of bounds"),j(0<=C&&C<=this.length,"sourceEnd out of bounds"),C>this.length&&(C=this.length);var N=(C=a.length-h<C-v?a.length-h+v:C)-v;if(N<100||!b._useTypedArrays)for(var B=0;B<N;B++)a[B+h]=this[B+v];else a._set(this.subarray(v,v+N),h)}},b.prototype.slice=function(a,h){var v=this.length;if(a=Y(a,v,0),h=Y(h,v,v),b._useTypedArrays)return b._augment(this.subarray(a,h));for(var C=h-a,N=new b(C,void 0,!0),B=0;B<C;B++)N[B]=this[B+a];return N},b.prototype.get=function(a){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(a)},b.prototype.set=function(a,h){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(a,h)},b.prototype.readUInt8=function(a,h){if(h||(j(a!=null,"missing offset"),j(a<this.length,"Trying to read beyond buffer length")),!(a>=this.length))return this[a]},b.prototype.readUInt16LE=function(a,h){return R(this,a,!0,h)},b.prototype.readUInt16BE=function(a,h){return R(this,a,!1,h)},b.prototype.readUInt32LE=function(a,h){return O(this,a,!0,h)},b.prototype.readUInt32BE=function(a,h){return O(this,a,!1,h)},b.prototype.readInt8=function(a,h){if(h||(j(a!=null,"missing offset"),j(a<this.length,"Trying to read beyond buffer length")),!(a>=this.length))return 128&this[a]?-1*(255-this[a]+1):this[a]},b.prototype.readInt16LE=function(a,h){return d(this,a,!0,h)},b.prototype.readInt16BE=function(a,h){return d(this,a,!1,h)},b.prototype.readInt32LE=function(a,h){return T(this,a,!0,h)},b.prototype.readInt32BE=function(a,h){return T(this,a,!1,h)},b.prototype.readFloatLE=function(a,h){return c(this,a,!0,h)},b.prototype.readFloatBE=function(a,h){return c(this,a,!1,h)},b.prototype.readDoubleLE=function(a,h){return l(this,a,!0,h)},b.prototype.readDoubleBE=function(a,h){return l(this,a,!1,h)},b.prototype.writeUInt8=function(a,h,v){v||(j(a!=null,"missing value"),j(h!=null,"missing offset"),j(h<this.length,"trying to write beyond buffer length"),Ce(a,255)),h>=this.length||(this[h]=a)},b.prototype.writeUInt16LE=function(a,h,v){i(this,a,h,!0,v)},b.prototype.writeUInt16BE=function(a,h,v){i(this,a,h,!1,v)},b.prototype.writeUInt32LE=function(a,h,v){m(this,a,h,!0,v)},b.prototype.writeUInt32BE=function(a,h,v){m(this,a,h,!1,v)},b.prototype.writeInt8=function(a,h,v){v||(j(a!=null,"missing value"),j(h!=null,"missing offset"),j(h<this.length,"Trying to write beyond buffer length"),Se(a,127,-128)),h>=this.length||(0<=a?this.writeUInt8(a,h,v):this.writeUInt8(255+a+1,h,v))},b.prototype.writeInt16LE=function(a,h,v){A(this,a,h,!0,v)},b.prototype.writeInt16BE=function(a,h,v){A(this,a,h,!1,v)},b.prototype.writeInt32LE=function(a,h,v){U(this,a,h,!0,v)},b.prototype.writeInt32BE=function(a,h,v){U(this,a,h,!1,v)},b.prototype.writeFloatLE=function(a,h,v){F(this,a,h,!0,v)},b.prototype.writeFloatBE=function(a,h,v){F(this,a,h,!1,v)},b.prototype.writeDoubleLE=function(a,h,v){H(this,a,h,!0,v)},b.prototype.writeDoubleBE=function(a,h,v){H(this,a,h,!1,v)},b.prototype.fill=function(a,h,v){if(h=h||0,v=v||this.length,j(typeof(a=typeof(a=a||0)=="string"?a.charCodeAt(0):a)=="number"&&!isNaN(a),"value is not a number"),j(h<=v,"end < start"),v!==h&&this.length!==0){j(0<=h&&h<this.length,"start out of bounds"),j(0<=v&&v<=this.length,"end out of bounds");for(var C=h;C<v;C++)this[C]=a}},b.prototype.inspect=function(){for(var a=[],h=this.length,v=0;v<h;v++)if(a[v]=Q(this[v]),v===r.INSPECT_MAX_BYTES){a[v+1]="...";break}return"<Buffer "+a.join(" ")+">"},b.prototype.toArrayBuffer=function(){if(typeof Uint8Array>"u")throw new Error("Buffer.toArrayBuffer not supported in this browser");if(b._useTypedArrays)return new b(this).buffer;for(var a=new Uint8Array(this.length),h=0,v=a.length;h<v;h+=1)a[h]=this[h];return a.buffer};var D=b.prototype;function Y(a,h,v){return typeof a!="number"?v:h<=(a=~~a)?h:0<=a||0<=(a+=h)?a:0}function Z(a){return(a=~~Math.ceil(+a))<0?0:a}function $(a){return(Array.isArray||function(h){return Object.prototype.toString.call(h)==="[object Array]"})(a)}function Q(a){return a<16?"0"+a.toString(16):a.toString(16)}function ce(a){for(var h=[],v=0;v<a.length;v++){var C=a.charCodeAt(v);if(C<=127)h.push(a.charCodeAt(v));else for(var N=v,B=(55296<=C&&C<=57343&&v++,encodeURIComponent(a.slice(N,v+1)).substr(1).split("%")),K=0;K<B.length;K++)h.push(parseInt(B[K],16))}return h}function Re(a){return x.toByteArray(a)}function ge(a,h,v,C){for(var N=0;N<C&&!(N+v>=h.length||N>=a.length);N++)h[N+v]=a[N];return N}function ue(a){try{return decodeURIComponent(a)}catch{return""}}function Ce(a,h){j(typeof a=="number","cannot write a non-number as a number"),j(0<=a,"specified a negative value for writing an unsigned value"),j(a<=h,"value is larger than maximum value for type"),j(Math.floor(a)===a,"value has a fractional component")}function Se(a,h,v){j(typeof a=="number","cannot write a non-number as a number"),j(a<=h,"value larger than maximum allowed value"),j(v<=a,"value smaller than minimum allowed value"),j(Math.floor(a)===a,"value has a fractional component")}function ke(a,h,v){j(typeof a=="number","cannot write a non-number as a number"),j(a<=h,"value larger than maximum allowed value"),j(v<=a,"value smaller than minimum allowed value")}function j(a,h){if(!a)throw new Error(h||"Failed assertion")}b._augment=function(a){return a._isBuffer=!0,a._get=a.get,a._set=a.set,a.get=D.get,a.set=D.set,a.write=D.write,a.toString=D.toString,a.toLocaleString=D.toString,a.toJSON=D.toJSON,a.copy=D.copy,a.slice=D.slice,a.readUInt8=D.readUInt8,a.readUInt16LE=D.readUInt16LE,a.readUInt16BE=D.readUInt16BE,a.readUInt32LE=D.readUInt32LE,a.readUInt32BE=D.readUInt32BE,a.readInt8=D.readInt8,a.readInt16LE=D.readInt16LE,a.readInt16BE=D.readInt16BE,a.readInt32LE=D.readInt32LE,a.readInt32BE=D.readInt32BE,a.readFloatLE=D.readFloatLE,a.readFloatBE=D.readFloatBE,a.readDoubleLE=D.readDoubleLE,a.readDoubleBE=D.readDoubleBE,a.writeUInt8=D.writeUInt8,a.writeUInt16LE=D.writeUInt16LE,a.writeUInt16BE=D.writeUInt16BE,a.writeUInt32LE=D.writeUInt32LE,a.writeUInt32BE=D.writeUInt32BE,a.writeInt8=D.writeInt8,a.writeInt16LE=D.writeInt16LE,a.writeInt16BE=D.writeInt16BE,a.writeInt32LE=D.writeInt32LE,a.writeInt32BE=D.writeInt32BE,a.writeFloatLE=D.writeFloatLE,a.writeFloatBE=D.writeFloatBE,a.writeDoubleLE=D.writeDoubleLE,a.writeDoubleBE=D.writeDoubleBE,a.fill=D.fill,a.inspect=D.inspect,a.toArrayBuffer=D.toArrayBuffer,a}}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/buffer/index.js","/node_modules/gulp-browserify/node_modules/buffer")},{"base64-js":2,buffer:3,ieee754:10,lYpoI2:11}],4:[function(t,e,r){(function(o,s,x,u,p,g,_,E,L){var x=t("buffer").Buffer,P=4,b=new x(P);b.fill(0),e.exports={hash:function(M,I,S,R){for(var O=I((function(i,m){i.length%P!=0&&(A=i.length+(P-i.length%P),i=x.concat([i,b],A));for(var A,U=[],F=m?i.readInt32BE:i.readInt32LE,H=0;H<i.length;H+=P)U.push(F.call(i,H));return U})(M=x.isBuffer(M)?M:new x(M),R),8*M.length),I=R,d=new x(S),T=I?d.writeInt32BE:d.writeInt32LE,c=0;c<O.length;c++)T.call(d,O[c],4*c,!0);return d}}}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/helpers.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:11}],5:[function(t,e,r){(function(o,s,x,u,p,g,_,E,L){var x=t("buffer").Buffer,P=t("./sha"),b=t("./sha256"),M=t("./rng"),I={sha1:P,sha256:b,md5:t("./md5")},S=64,R=new x(S);function O(i,m){var A=I[i=i||"sha1"],U=[];return A||d("algorithm:",i,"is not yet supported"),{update:function(F){return x.isBuffer(F)||(F=new x(F)),U.push(F),F.length,this},digest:function(F){var H=x.concat(U),H=m?(function(D,Y,Z){x.isBuffer(Y)||(Y=new x(Y)),x.isBuffer(Z)||(Z=new x(Z)),Y.length>S?Y=D(Y):Y.length<S&&(Y=x.concat([Y,R],S));for(var $=new x(S),Q=new x(S),ce=0;ce<S;ce++)$[ce]=54^Y[ce],Q[ce]=92^Y[ce];return Z=D(x.concat([$,Z])),D(x.concat([Q,Z]))})(A,m,H):A(H);return U=null,F?H.toString(F):H}}}function d(){var i=[].slice.call(arguments).join(" ");throw new Error([i,"we accept pull requests","http://github.com/dominictarr/crypto-browserify"].join(`
`))}R.fill(0),r.createHash=function(i){return O(i)},r.createHmac=O,r.randomBytes=function(i,m){if(!m||!m.call)return new x(M(i));try{m.call(this,void 0,new x(M(i)))}catch(A){m(A)}};var T,c=["createCredentials","createCipher","createCipheriv","createDecipher","createDecipheriv","createSign","createVerify","createDiffieHellman","pbkdf2"],l=function(i){r[i]=function(){d("sorry,",i,"is not implemented yet")}};for(T in c)l(c[T])}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/index.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./md5":6,"./rng":7,"./sha":8,"./sha256":9,buffer:3,lYpoI2:11}],6:[function(t,e,r){(function(o,s,f,u,p,g,_,E,L){var x=t("./helpers");function P(d,T){d[T>>5]|=128<<T%32,d[14+(T+64>>>9<<4)]=T;for(var c=1732584193,l=-271733879,i=-1732584194,m=271733878,A=0;A<d.length;A+=16){var U=c,F=l,H=i,D=m,c=M(c,l,i,m,d[A+0],7,-680876936),m=M(m,c,l,i,d[A+1],12,-389564586),i=M(i,m,c,l,d[A+2],17,606105819),l=M(l,i,m,c,d[A+3],22,-1044525330);c=M(c,l,i,m,d[A+4],7,-176418897),m=M(m,c,l,i,d[A+5],12,1200080426),i=M(i,m,c,l,d[A+6],17,-1473231341),l=M(l,i,m,c,d[A+7],22,-45705983),c=M(c,l,i,m,d[A+8],7,1770035416),m=M(m,c,l,i,d[A+9],12,-1958414417),i=M(i,m,c,l,d[A+10],17,-42063),l=M(l,i,m,c,d[A+11],22,-1990404162),c=M(c,l,i,m,d[A+12],7,1804603682),m=M(m,c,l,i,d[A+13],12,-40341101),i=M(i,m,c,l,d[A+14],17,-1502002290),c=I(c,l=M(l,i,m,c,d[A+15],22,1236535329),i,m,d[A+1],5,-165796510),m=I(m,c,l,i,d[A+6],9,-1069501632),i=I(i,m,c,l,d[A+11],14,643717713),l=I(l,i,m,c,d[A+0],20,-373897302),c=I(c,l,i,m,d[A+5],5,-701558691),m=I(m,c,l,i,d[A+10],9,38016083),i=I(i,m,c,l,d[A+15],14,-660478335),l=I(l,i,m,c,d[A+4],20,-405537848),c=I(c,l,i,m,d[A+9],5,568446438),m=I(m,c,l,i,d[A+14],9,-1019803690),i=I(i,m,c,l,d[A+3],14,-187363961),l=I(l,i,m,c,d[A+8],20,1163531501),c=I(c,l,i,m,d[A+13],5,-1444681467),m=I(m,c,l,i,d[A+2],9,-51403784),i=I(i,m,c,l,d[A+7],14,1735328473),c=S(c,l=I(l,i,m,c,d[A+12],20,-1926607734),i,m,d[A+5],4,-378558),m=S(m,c,l,i,d[A+8],11,-2022574463),i=S(i,m,c,l,d[A+11],16,1839030562),l=S(l,i,m,c,d[A+14],23,-35309556),c=S(c,l,i,m,d[A+1],4,-1530992060),m=S(m,c,l,i,d[A+4],11,1272893353),i=S(i,m,c,l,d[A+7],16,-155497632),l=S(l,i,m,c,d[A+10],23,-1094730640),c=S(c,l,i,m,d[A+13],4,681279174),m=S(m,c,l,i,d[A+0],11,-358537222),i=S(i,m,c,l,d[A+3],16,-722521979),l=S(l,i,m,c,d[A+6],23,76029189),c=S(c,l,i,m,d[A+9],4,-640364487),m=S(m,c,l,i,d[A+12],11,-421815835),i=S(i,m,c,l,d[A+15],16,530742520),c=R(c,l=S(l,i,m,c,d[A+2],23,-995338651),i,m,d[A+0],6,-198630844),m=R(m,c,l,i,d[A+7],10,1126891415),i=R(i,m,c,l,d[A+14],15,-1416354905),l=R(l,i,m,c,d[A+5],21,-57434055),c=R(c,l,i,m,d[A+12],6,1700485571),m=R(m,c,l,i,d[A+3],10,-1894986606),i=R(i,m,c,l,d[A+10],15,-1051523),l=R(l,i,m,c,d[A+1],21,-2054922799),c=R(c,l,i,m,d[A+8],6,1873313359),m=R(m,c,l,i,d[A+15],10,-30611744),i=R(i,m,c,l,d[A+6],15,-1560198380),l=R(l,i,m,c,d[A+13],21,1309151649),c=R(c,l,i,m,d[A+4],6,-145523070),m=R(m,c,l,i,d[A+11],10,-1120210379),i=R(i,m,c,l,d[A+2],15,718787259),l=R(l,i,m,c,d[A+9],21,-343485551),c=O(c,U),l=O(l,F),i=O(i,H),m=O(m,D)}return Array(c,l,i,m)}function b(d,T,c,l,i,m){return O((T=O(O(T,d),O(l,m)))<<i|T>>>32-i,c)}function M(d,T,c,l,i,m,A){return b(T&c|~T&l,d,T,i,m,A)}function I(d,T,c,l,i,m,A){return b(T&l|c&~l,d,T,i,m,A)}function S(d,T,c,l,i,m,A){return b(T^c^l,d,T,i,m,A)}function R(d,T,c,l,i,m,A){return b(c^(T|~l),d,T,i,m,A)}function O(d,T){var c=(65535&d)+(65535&T);return(d>>16)+(T>>16)+(c>>16)<<16|65535&c}e.exports=function(d){return x.hash(d,P,16)}}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/md5.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],7:[function(t,e,r){(function(o,s,f,u,p,g,_,E,L){e.exports=function(x){for(var P,b=new Array(x),M=0;M<x;M++)(3&M)==0&&(P=4294967296*Math.random()),b[M]=P>>>((3&M)<<3)&255;return b}}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/rng.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:11}],8:[function(t,e,r){(function(o,s,f,u,p,g,_,E,L){var x=t("./helpers");function P(I,S){I[S>>5]|=128<<24-S%32,I[15+(S+64>>9<<4)]=S;for(var R,O,d,T=Array(80),c=1732584193,l=-271733879,i=-1732584194,m=271733878,A=-1009589776,U=0;U<I.length;U+=16){for(var F=c,H=l,D=i,Y=m,Z=A,$=0;$<80;$++){T[$]=$<16?I[U+$]:M(T[$-3]^T[$-8]^T[$-14]^T[$-16],1);var Q=b(b(M(c,5),(Q=l,O=i,d=m,(R=$)<20?Q&O|~Q&d:!(R<40)&&R<60?Q&O|Q&d|O&d:Q^O^d)),b(b(A,T[$]),(R=$)<20?1518500249:R<40?1859775393:R<60?-1894007588:-899497514)),A=m,m=i,i=M(l,30),l=c,c=Q}c=b(c,F),l=b(l,H),i=b(i,D),m=b(m,Y),A=b(A,Z)}return Array(c,l,i,m,A)}function b(I,S){var R=(65535&I)+(65535&S);return(I>>16)+(S>>16)+(R>>16)<<16|65535&R}function M(I,S){return I<<S|I>>>32-S}e.exports=function(I){return x.hash(I,P,20,!0)}}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],9:[function(t,e,r){(function(o,s,f,u,p,g,_,E,L){function x(S,R){var O=(65535&S)+(65535&R);return(S>>16)+(R>>16)+(O>>16)<<16|65535&O}function P(S,R){var O,d=new Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298),T=new Array(1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225),c=new Array(64);S[R>>5]|=128<<24-R%32,S[15+(R+64>>9<<4)]=R;for(var l,i,m=0;m<S.length;m+=16){for(var A=T[0],U=T[1],F=T[2],H=T[3],D=T[4],Y=T[5],Z=T[6],$=T[7],Q=0;Q<64;Q++)c[Q]=Q<16?S[Q+m]:x(x(x((i=c[Q-2],M(i,17)^M(i,19)^I(i,10)),c[Q-7]),(i=c[Q-15],M(i,7)^M(i,18)^I(i,3))),c[Q-16]),O=x(x(x(x($,M(i=D,6)^M(i,11)^M(i,25)),D&Y^~D&Z),d[Q]),c[Q]),l=x(M(l=A,2)^M(l,13)^M(l,22),A&U^A&F^U&F),$=Z,Z=Y,Y=D,D=x(H,O),H=F,F=U,U=A,A=x(O,l);T[0]=x(A,T[0]),T[1]=x(U,T[1]),T[2]=x(F,T[2]),T[3]=x(H,T[3]),T[4]=x(D,T[4]),T[5]=x(Y,T[5]),T[6]=x(Z,T[6]),T[7]=x($,T[7])}return T}var b=t("./helpers"),M=function(S,R){return S>>>R|S<<32-R},I=function(S,R){return S>>>R};e.exports=function(S){return b.hash(S,P,32,!0)}}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha256.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],10:[function(t,e,r){(function(o,s,f,u,p,g,_,E,L){r.read=function(x,P,b,M,m){var S,R,O=8*m-M-1,d=(1<<O)-1,T=d>>1,c=-7,l=b?m-1:0,i=b?-1:1,m=x[P+l];for(l+=i,S=m&(1<<-c)-1,m>>=-c,c+=O;0<c;S=256*S+x[P+l],l+=i,c-=8);for(R=S&(1<<-c)-1,S>>=-c,c+=M;0<c;R=256*R+x[P+l],l+=i,c-=8);if(S===0)S=1-T;else{if(S===d)return R?NaN:1/0*(m?-1:1);R+=Math.pow(2,M),S-=T}return(m?-1:1)*R*Math.pow(2,S-M)},r.write=function(x,P,b,M,I,A){var R,O,d=8*A-I-1,T=(1<<d)-1,c=T>>1,l=I===23?Math.pow(2,-24)-Math.pow(2,-77):0,i=M?0:A-1,m=M?1:-1,A=P<0||P===0&&1/P<0?1:0;for(P=Math.abs(P),isNaN(P)||P===1/0?(O=isNaN(P)?1:0,R=T):(R=Math.floor(Math.log(P)/Math.LN2),P*(M=Math.pow(2,-R))<1&&(R--,M*=2),2<=(P+=1<=R+c?l/M:l*Math.pow(2,1-c))*M&&(R++,M/=2),T<=R+c?(O=0,R=T):1<=R+c?(O=(P*M-1)*Math.pow(2,I),R+=c):(O=P*Math.pow(2,c-1)*Math.pow(2,I),R=0));8<=I;x[b+i]=255&O,i+=m,O/=256,I-=8);for(R=R<<I|O,d+=I;0<d;x[b+i]=255&R,i+=m,R/=256,d-=8);x[b+i-m]|=128*A}}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/ieee754/index.js","/node_modules/gulp-browserify/node_modules/ieee754")},{buffer:3,lYpoI2:11}],11:[function(t,e,r){(function(o,s,f,u,p,g,_,E,L){var x,P,b;function M(){}(o=e.exports={}).nextTick=(P=typeof window<"u"&&window.setImmediate,b=typeof window<"u"&&window.postMessage&&window.addEventListener,P?function(I){return window.setImmediate(I)}:b?(x=[],window.addEventListener("message",function(I){var S=I.source;S!==window&&S!==null||I.data!=="process-tick"||(I.stopPropagation(),0<x.length&&x.shift()())},!0),function(I){x.push(I),window.postMessage("process-tick","*")}):function(I){setTimeout(I,0)}),o.title="browser",o.browser=!0,o.env={},o.argv=[],o.on=M,o.addListener=M,o.once=M,o.off=M,o.removeListener=M,o.removeAllListeners=M,o.emit=M,o.binding=function(I){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(I){throw new Error("process.chdir is not supported")}}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/process/browser.js","/node_modules/gulp-browserify/node_modules/process")},{buffer:3,lYpoI2:11}]},{},[1])(1)})})(pt)),pt.exports}_o();var mt,$t;function Sn(){return $t||($t=1,mt=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","uint","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"]),mt}var gt,Jt;function wo(){return Jt||(Jt=1,gt=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"]),gt}var yt,en;function In(){return en||(en=1,yt=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"]),yt}var bt,tn;function xo(){if(tn)return bt;tn=1;var y=Sn();return bt=y.slice().concat(["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray"]),bt}var vt,nn;function Ao(){if(nn)return vt;nn=1;var y=In();return y=y.slice().filter(function(n){return!/^(gl\_|texture)/.test(n)}),vt=y.concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"]),vt}var _t,rn;function To(){if(rn)return _t;rn=1,_t=R;var y=Sn(),n=wo(),t=In(),e=xo(),r=Ao(),o=999,s=9999,f=0,u=1,p=2,g=3,_=4,E=5,L=6,x=7,P=8,b=9,M=10,I=11,S=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"];function R(O){var d=0,T=0,c=o,l,i,m=[],A=[],U=1,F=0,H=0,D=!1,Y=!1,Z="",$;O=O||{};var Q=t,ce=y;O.version==="300 es"&&(Q=r,ce=e);for(var Re={},ge={},d=0;d<Q.length;d++)Re[Q[d]]=!0;for(var d=0;d<ce.length;d++)ge[ce[d]]=!0;return function(W){return A=[],W!==null?Ce(W):Se()};function ue(W){W.length&&A.push({type:S[c],data:W,position:H,line:U,column:F})}function Ce(W){d=0,W.toString&&(W=W.toString()),Z+=W.replace(/\r\n/g,`
`),$=Z.length;for(var oe;l=Z[d],d<$;){switch(oe=d,c){case f:d=v();break;case u:d=h();break;case p:d=a();break;case g:d=C();break;case _:d=K();break;case I:d=B();break;case E:d=ne();break;case s:d=se();break;case b:d=j();break;case o:d=ke();break}if(oe!==d)switch(Z[oe]){case`
`:F=0,++U;break;default:++F;break}}return T+=d,Z=Z.slice(d),A}function Se(W){return m.length&&ue(m.join("")),c=M,ue("(eof)"),A}function ke(){return m=m.length?[]:m,i==="/"&&l==="*"?(H=T+d-1,c=f,i=l,d+1):i==="/"&&l==="/"?(H=T+d-1,c=u,i=l,d+1):l==="#"?(c=p,H=T+d,d):/\s/.test(l)?(c=b,H=T+d,d):(D=/\d/.test(l),Y=/[^\w_]/.test(l),H=T+d,c=D?_:Y?g:s,d)}function j(){return/[^\s]/g.test(l)?(ue(m.join("")),c=o,d):(m.push(l),i=l,d+1)}function a(){return(l==="\r"||l===`
`)&&i!=="\\"?(ue(m.join("")),c=o,d):(m.push(l),i=l,d+1)}function h(){return a()}function v(){return l==="/"&&i==="*"?(m.push(l),ue(m.join("")),c=o,d+1):(m.push(l),i=l,d+1)}function C(){if(i==="."&&/\d/.test(l))return c=E,d;if(i==="/"&&l==="*")return c=f,d;if(i==="/"&&l==="/")return c=u,d;if(l==="."&&m.length){for(;N(m););return c=E,d}if(l===";"||l===")"||l==="("){if(m.length)for(;N(m););return ue(l),c=o,d+1}var W=m.length===2&&l!=="=";if(/[\w_\d\s]/.test(l)||W){for(;N(m););return c=o,d}return m.push(l),i=l,d+1}function N(W){var oe=0,ae,re;do{if(ae=n.indexOf(W.slice(0,W.length+oe).join("")),re=n[ae],ae===-1){if(oe--+W.length>0)continue;re=W.slice(0,1).join("")}return ue(re),H+=re.length,m=m.slice(re.length),m.length}while(!0)}function B(){return/[^a-fA-F0-9]/.test(l)?(ue(m.join("")),c=o,d):(m.push(l),i=l,d+1)}function K(){return l==="."||/[eE]/.test(l)?(m.push(l),c=E,i=l,d+1):l==="x"&&m.length===1&&m[0]==="0"?(c=I,m.push(l),i=l,d+1):/[^\d]/.test(l)?(ue(m.join("")),c=o,d):(m.push(l),i=l,d+1)}function ne(){return l==="f"&&(m.push(l),i=l,d+=1),/[eE]/.test(l)||(l==="-"||l==="+")&&/[eE]/.test(i)?(m.push(l),i=l,d+1):/[^\d]/.test(l)?(ue(m.join("")),c=o,d):(m.push(l),i=l,d+1)}function se(){if(/[^\d\w_]/.test(l)){var W=m.join("");return ge[W]?c=P:Re[W]?c=x:c=L,ue(m.join("")),c=o,d}return m.push(l),i=l,d+1}}return _t}var wt,on;function Eo(){if(on)return wt;on=1;var y=To();wt=n;function n(t,e){var r=y(e),o=[];return o=o.concat(r(t)),o=o.concat(r(null)),o}return wt}Eo();function Mo(y,n){if(typeof y!="object"||y===null)return y;var t=y[Symbol.toPrimitive];if(t!==void 0){var e=t.call(y,n);if(typeof e!="object")return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(y)}function Ro(y){var n=Mo(y,"string");return typeof n=="symbol"?n:String(n)}function te(y,n,t){return n=Ro(n),n in y?Object.defineProperty(y,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):y[n]=t,y}var V={position:"csm_Position",positionRaw:"csm_PositionRaw",pointSize:"csm_PointSize",fragColor:"csm_FragColor",diffuseColor:"csm_DiffuseColor",normal:"csm_Normal",roughness:"csm_Roughness",metalness:"csm_Metalness",emissive:"csm_Emissive",ao:"csm_AO",bump:"csm_Bump",depthAlpha:"csm_DepthAlpha"},fe,je;fe={},te(fe,"".concat(V.normal),{"#include <beginnormal_vertex>":`
    vec3 objectNormal = `.concat(V.normal,`;
    #ifdef USE_TANGENT
	    vec3 objectTangent = vec3( tangent.xyz );
    #endif
    `)}),te(fe,"".concat(V.position),{"#include <begin_vertex>":`
    vec3 transformed = `.concat(V.position,`;
  `)}),te(fe,"".concat(V.positionRaw),{"#include <begin_vertex>":`
    vec4 csm_internal_positionUnprojected = `.concat(V.positionRaw,`;
    mat4x4 csm_internal_unprojectMatrix = projectionMatrix * modelViewMatrix;
    #ifdef USE_INSTANCING
      csm_internal_unprojectMatrix = csm_internal_unprojectMatrix * instanceMatrix;
    #endif
    csm_internal_positionUnprojected = inverse(csm_internal_unprojectMatrix) * csm_internal_positionUnprojected;
    vec3 transformed = csm_internal_positionUnprojected.xyz;
  `)}),te(fe,"".concat(V.pointSize),{"gl_PointSize = size;":`
    gl_PointSize = `.concat(V.pointSize,`;
    `)}),te(fe,"".concat(V.diffuseColor),{"#include <color_fragment>":`
    #include <color_fragment>
    diffuseColor = `.concat(V.diffuseColor,`;
  `)}),te(fe,"".concat(V.fragColor),{"#include <dithering_fragment>":`
    #include <dithering_fragment>
    gl_FragColor  = `.concat(V.fragColor,`;
  `)}),te(fe,"".concat(V.emissive),{"vec3 totalEmissiveRadiance = emissive;":`
    vec3 totalEmissiveRadiance = `.concat(V.emissive,`;
    `)}),te(fe,"".concat(V.roughness),{"#include <roughnessmap_fragment>":`
    #include <roughnessmap_fragment>
    roughnessFactor = `.concat(V.roughness,`;
    `)}),te(fe,"".concat(V.metalness),{"#include <metalnessmap_fragment>":`
    #include <metalnessmap_fragment>
    metalnessFactor = `.concat(V.metalness,`;
    `)}),te(fe,"".concat(V.ao),{"#include <aomap_fragment>":`
    #include <aomap_fragment>
    reflectedLight.indirectDiffuse *= 1. - `.concat(V.ao,`;
    `)}),te(fe,"".concat(V.bump),{"#include <normal_fragment_maps>":`
    #include <normal_fragment_maps>

    vec3 csm_internal_orthogonal = `.concat(V.bump," - (dot(").concat(V.bump,`, normal) * normal);
    vec3 csm_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_internal_orthogonal;
    normal = normalize(normal - csm_internal_projectedbump);
    `)}),te(fe,"".concat(V.depthAlpha),{"gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );":`
      gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity * `.concat(V.depthAlpha,` );
    `),"gl_FragColor = packDepthToRGBA( fragCoordZ );":`
      gl_FragColor = packDepthToRGBA( fragCoordZ );
      gl_FragColor.a *= `.concat(V.depthAlpha,`;
    `)});je={},te(je,"".concat(V.position),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":`
    gl_Position = projectionMatrix * modelViewMatrix * vec4( `.concat(V.position,`, 1.0 );
  `)}),te(je,"".concat(V.positionRaw),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":`
    gl_Position = `.concat(V.position,`;
  `)}),te(je,"".concat(V.diffuseColor),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":`
    gl_FragColor = `.concat(V.diffuseColor,`;
  `)}),te(je,"".concat(V.fragColor),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":`
    gl_FragColor = `.concat(V.fragColor,`;
  `)});var de;de={},te(de,"".concat(V.position),"*"),te(de,"".concat(V.positionRaw),"*"),te(de,"".concat(V.normal),"*"),te(de,"".concat(V.pointSize),["PointsMaterial"]),te(de,"".concat(V.diffuseColor),"*"),te(de,"".concat(V.fragColor),"*"),te(de,"".concat(V.emissive),["MeshStandardMaterial","MeshPhysicalMaterial"]),te(de,"".concat(V.roughness),["MeshStandardMaterial","MeshPhysicalMaterial"]),te(de,"".concat(V.metalness),["MeshStandardMaterial","MeshPhysicalMaterial"]),te(de,"".concat(V.ao),["MeshStandardMaterial","MeshPhysicalMaterial","MeshBasicMaterial","MeshLambertMaterial","MeshPhongMaterial","MeshToonMaterial"]),te(de,"".concat(V.bump),["MeshLambertMaterial","MeshMatcapMaterial","MeshNormalMaterial","MeshPhongMaterial","MeshPhysicalMaterial","MeshStandardMaterial","MeshToonMaterial","ShadowMaterial"]),te(de,"".concat(V.depthAlpha),"*");var Je={exports:{}},So=Je.exports,sn;function Io(){return sn||(sn=1,(function(y,n){(function(t,e){y.exports=e()})(So,function(){var t=function(){function e(L){return s.appendChild(L.dom),L}function r(L){for(var x=0;x<s.children.length;x++)s.children[x].style.display=x===L?"block":"none";o=L}var o=0,s=document.createElement("div");s.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",s.addEventListener("click",function(L){L.preventDefault(),r(++o%s.children.length)},!1);var f=(performance||Date).now(),u=f,p=0,g=e(new t.Panel("FPS","#0ff","#002")),_=e(new t.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var E=e(new t.Panel("MB","#f08","#201"));return r(0),{REVISION:16,dom:s,addPanel:e,showPanel:r,begin:function(){f=(performance||Date).now()},end:function(){p++;var L=(performance||Date).now();if(_.update(L-f,200),L>u+1e3&&(g.update(1e3*p/(L-u),100),u=L,p=0,E)){var x=performance.memory;E.update(x.usedJSHeapSize/1048576,x.jsHeapSizeLimit/1048576)}return L},update:function(){f=this.end()},domElement:s,setMode:r}};return t.Panel=function(e,r,o){var s=1/0,f=0,u=Math.round,p=u(window.devicePixelRatio||1),g=80*p,_=48*p,E=3*p,L=2*p,x=3*p,P=15*p,b=74*p,M=30*p,I=document.createElement("canvas");I.width=g,I.height=_,I.style.cssText="width:80px;height:48px";var S=I.getContext("2d");return S.font="bold "+9*p+"px Helvetica,Arial,sans-serif",S.textBaseline="top",S.fillStyle=o,S.fillRect(0,0,g,_),S.fillStyle=r,S.fillText(e,E,L),S.fillRect(x,P,b,M),S.fillStyle=o,S.globalAlpha=.9,S.fillRect(x,P,b,M),{dom:I,update:function(R,O){s=Math.min(s,R),f=Math.max(f,R),S.fillStyle=o,S.globalAlpha=1,S.fillRect(0,0,g,P),S.fillStyle=r,S.fillText(u(R)+" "+e+" ("+u(s)+"-"+u(f)+")",E,L),S.drawImage(I,x+p,P,b-p,M,x,P,b-p,M),S.fillRect(x+b-p,P,p,M),S.fillStyle=o,S.globalAlpha=.9,S.fillRect(x+b-p,P,p,u((1-R/O)*M))}}},t})})(Je)),Je.exports}Io();function Ln(y,n,t,e){const r=class extends un{key="";constructor(o={}){const s=Object.entries(y);super({uniforms:s.reduce((f,[u,p])=>{const g=fn.clone({[u]:{value:p}});return{...f,...g}},{}),vertexShader:n,fragmentShader:t}),s.forEach(([f])=>Object.defineProperty(this,f,{get:()=>this.uniforms[f].value,set:u=>this.uniforms[f].value=u})),Object.assign(this,o)}};return r.key=nt.generateUUID(),r}(function(){const y=new vn,n=new pn(new Float32Array([-1,-1,0,0,0,1,-1,0,1,0,1,1,0,1,1,-1,1,0,0,1]),5);return y.setIndex([0,1,2,0,2,3]),y.setAttribute("position",new Et(n,3,0,!1)),y.setAttribute("uv",new Et(n,2,3,!1)),y})();nt.clamp;nt.lerp;new pe("black"),new he(1,1);const Lo=["args","material-uniforms-color-value"];zt.ReflectorShader;new ee;new ee;new ee;const Po=["target","auto-rotate","auto-rotate-speed","enable-damping","damping-factor","enable-pan","key-pan-speed","keys","max-azimuth-angle","min-azimuth-angle","max-polar-angle","min-polar-angle","min-distance","max-distance","min-zoom","max-zoom","touches","enable-zoom","zoom-speed","enable-rotate","rotate-speed","mouse-buttons","args"];var No=rt({__name:"OrbitControls",props:{makeDefault:{type:Boolean,required:!1,default:!1},camera:{type:Object,required:!1},domElement:{type:null,required:!1},target:{type:null,required:!1,default:()=>[0,0,0]},enableDamping:{type:Boolean,required:!1,default:!0},dampingFactor:{type:Number,required:!1,default:.05},autoRotate:{type:Boolean,required:!1,default:!1},autoRotateSpeed:{type:Number,required:!1,default:2},enablePan:{type:Boolean,required:!1,default:!0},keyPanSpeed:{type:Number,required:!1,default:7},keys:{type:Object,required:!1},maxAzimuthAngle:{type:Number,required:!1,default:Number.POSITIVE_INFINITY},minAzimuthAngle:{type:Number,required:!1,default:Number.NEGATIVE_INFINITY},maxPolarAngle:{type:Number,required:!1,default:Math.PI},minPolarAngle:{type:Number,required:!1,default:0},minDistance:{type:Number,required:!1,default:0},maxDistance:{type:Number,required:!1,default:Number.POSITIVE_INFINITY},minZoom:{type:Number,required:!1,default:0},maxZoom:{type:Number,required:!1,default:Number.POSITIVE_INFINITY},touches:{type:Object,required:!1,default:()=>({ONE:Ne.ROTATE,TWO:Ne.DOLLY_PAN})},enableZoom:{type:Boolean,required:!1,default:!0},zoomSpeed:{type:Number,required:!1,default:1},enableRotate:{type:Boolean,required:!1,default:!0},rotateSpeed:{type:Number,required:!1,default:1},mouseButtons:{type:Object,required:!1,default:()=>({LEFT:Ee.ROTATE,MIDDLE:Ee.DOLLY,RIGHT:Ee.PAN})}},emits:["change","start","end"],setup(y,{expose:n,emit:t}){const e=y,r=t,{makeDefault:o,autoRotate:s,autoRotateSpeed:f,enableDamping:u,dampingFactor:p,enablePan:g,keyPanSpeed:_,maxAzimuthAngle:E,minAzimuthAngle:L,maxPolarAngle:x,minPolarAngle:P,minDistance:b,maxDistance:M,minZoom:I,maxZoom:S,enableZoom:R,zoomSpeed:O,enableRotate:d,touches:T,rotateSpeed:c,target:l,mouseButtons:i}=wn(e),{camera:m,renderer:A,extend:U,controls:F,invalidate:H}=xn(),D=It(null);U({OrbitControls:kr}),An(D,$=>{Y(),$&&o.value?F.value=$:F.value=null});function Y(){ct(D.value,"change",()=>{r("change",D.value),H()}),ct(D.value,"start",()=>r("start",D.value)),ct(D.value,"end",()=>r("end",D.value))}const{onBeforeRender:Z}=Tn();return Z(()=>{D.value&&(u.value||s.value)&&(D.value.update(),s.value)}),_r(()=>{D.value&&D.value.dispose()}),n({instance:D}),($,Q)=>(y.camera||q(m))&&(y.domElement||q(A).domElement)?(ye(),ve("TresOrbitControls",{ref_key:"controlsRef",ref:D,key:(y.camera||q(m))?.uuid,target:q(l),"auto-rotate":q(s),"auto-rotate-speed":q(f),"enable-damping":q(u),"damping-factor":q(p),"enable-pan":q(g),"key-pan-speed":q(_),keys:y.keys,"max-azimuth-angle":q(E),"min-azimuth-angle":q(L),"max-polar-angle":q(x),"min-polar-angle":q(P),"min-distance":q(b),"max-distance":q(M),"min-zoom":q(I),"max-zoom":q(S),touches:q(T),"enable-zoom":q(R),"zoom-speed":q(O),"enable-rotate":q(d),"rotate-speed":q(c),"mouse-buttons":q(i),args:[y.camera||q(m),y.domElement||q(A).domElement]},null,8,Po)):$e("v-if",!0)}}),Co=No;function xt(y,n){const e=vr(Br,y,{}),r=Mt(()=>e.state.value?.scene?Ut(e.state.value?.scene).nodes:{}),o=Mt(()=>e.state.value?.scene?Ut(e.state.value?.scene).materials:{});return{...e,nodes:r,materials:o}}new ee(0,0,0);new ee(0,0,0);new ee(0,0,0);new pe;const Do={key:0,args:[0,1,64]},Oo={key:1,args:[.5,1,64]},ko={key:2},jo=["tone-mapped","map","side","color"];new pe(16777215);const Bo=["object"],Fo=["object"],Uo=["object"],zo=rt({__name:"Hobby3DScene",props:{kind:{}},setup(y){const n=y,t=It(null),{onBeforeRender:e}=Tn();e(({delta:f,elapsed:u})=>{t.value&&(t.value.rotation.y=.4*u)});const{state:r}=xt("/models/genk_echt.glb"),{state:o}=xt("/models/f1.glb"),{state:s}=xt("/models/tennisraket.glb");return(f,u)=>(ye(),ve(Er,null,[u[0]||(u[0]=Be("TresPerspectiveCamera",{position:[0,0,3],fov:45},null,-1)),u[1]||(u[1]=Be("TresAmbientLight",{intensity:1},null,-1)),u[2]||(u[2]=Be("TresDirectionalLight",{position:[2,2,2],intensity:.5},null,-1)),Tr(q(Co),{"enable-zoom":!1,"enable-pan":!1,"rotate-speed":.25,"enable-damping":!0,"damping-factor":.08}),Be("TresGroup",{ref_key:"group",ref:t},[n.kind==="tennis"&&q(s)?(ye(),ve("primitive",{key:0,object:q(s).scene,scale:.19,rotation:[5,0,0],position:[0,-.6,-.5]},null,8,Bo)):$e("",!0),n.kind==="genk"&&q(r)?(ye(),ve("primitive",{key:1,object:q(r).scene,scale:7,rotation:[0,0,0],position:[0,-.8,0]},null,8,Fo)):$e("",!0),n.kind==="f1"&&q(o)?(ye(),ve("primitive",{key:2,object:q(o).scene,scale:.56,rotation:[0,0,0],position:[0,-.9,0]},null,8,Uo)):$e("",!0)],512)],64))}});export{zo as default};
